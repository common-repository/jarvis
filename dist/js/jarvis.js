/**
 * jarvis -  Jarvis is your admin assistant, putting WordPress at your fingertips via a quicksearch interface.
 * @version v1.1.1
 * @link https://github.com/wdgdc/jarvis#readme
 * @license MIT
 */
var Jarvis=function(t,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=n(t),s=n(e);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;(function(t){var e={isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,(function(t,s){if(!(i=n.call(null,s,t,e)))return!1})),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,(function(t,s){if(i=n.call(null,s,t,e))return!1})),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){return t.isFunction(e)?e:n;function n(){return String(e)}},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,s;return function(){var r,o,a=this,c=arguments;return r=function(){i=null,n||(s=t.apply(a,c))},o=n&&!i,clearTimeout(i),i=setTimeout(r,e),o&&(s=t.apply(a,c)),s}},throttle:function(t,e){var n,i,s,r,o,a;return o=0,a=function(){o=new Date,s=null,r=t.apply(n,i)},function(){var c=new Date,u=e-(c-o);return n=this,i=arguments,u<=0?(clearTimeout(s),s=null,o=c,r=t.apply(n,i)):s||(s=setTimeout(a,u)),r}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}},n=function(){var t={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return n;function n(n){var o,a;return a=e.mixin({},t,n),{css:(o={css:r(),classes:a,html:i(a),selectors:s(a)}).css,html:o.html,classes:o.classes,selectors:o.selectors,mixin:function(t){e.mixin(t,o)}}}function i(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function s(t){var n={};return e.each(t,(function(t,e){n[e]="."+t})),n}function r(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}}(),i=function(){var n,i;function s(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}return n="typeahead:",i={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(s.prototype,{_trigger:function(e,i){var s;return s=t.Event(n+e),(i=i||[]).unshift(s),this.$el.trigger.apply(this.$el,i),s},before:function(t){var e;return e=[].slice.call(arguments,1),this._trigger("before"+t,e).isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=i[t])&&this._trigger(e,[].slice.call(arguments,1))}}),s}(),s=function(){var t=/\s+/,e=c();return{onSync:s,onAsync:i,off:r,trigger:o};function n(e,n,i,s){var r;if(!i)return this;for(n=n.split(t),i=s?u(i,s):i,this._callbacks=this._callbacks||{};r=n.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][e].push(i);return this}function i(t,e,i){return n.call(this,"async",t,e,i)}function s(t,e,i){return n.call(this,"sync",t,e,i)}function r(e){var n;if(!this._callbacks)return this;for(e=e.split(t);n=e.shift();)delete this._callbacks[n];return this}function o(n){var i,s,r,o,c;if(!this._callbacks)return this;for(n=n.split(t),r=[].slice.call(arguments,1);(i=n.shift())&&(s=this._callbacks[i]);)o=a(s.sync,this,[i].concat(r)),c=a(s.async,this,[i].concat(r)),o()&&e(c);return this}function a(t,e,n){return i;function i(){for(var i,s=0,r=t.length;!i&&s<r;s+=1)i=!1===t[s].apply(e,n);return!i}}function c(){return window.setImmediate?function(t){setImmediate((function(){t()}))}:function(t){setTimeout((function(){t()}),0)}}function u(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}}(),r=function(t){var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(s){var r;function o(e){var n,i,o;return(n=r.exec(e.data))&&(o=t.createElement(s.tagName),s.className&&(o.className=s.className),(i=e.splitText(n.index)).splitText(n[0].length),o.appendChild(i.cloneNode(!0)),e.parentNode.replaceChild(o,i)),!!n}function a(t,e){for(var n,i=3,s=0;s<t.childNodes.length;s++)(n=t.childNodes[s]).nodeType===i?s+=e(n)?1:0:a(n,e)}(s=e.mixin({},n,s)).node&&s.pattern&&(s.pattern=e.isArray(s.pattern)?s.pattern:[s.pattern],r=i(s.pattern,s.caseSensitive,s.wordsOnly),a(s.node,o))};function i(t,n,i){for(var s,r=[],o=0,a=t.length;o<a;o++)r.push(e.escapeRegExChars(t[o]));return s=i?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",n?new RegExp(s):new RegExp(s,"i")}}(window.document),o=function(){var n;function i(n,i){(n=n||{}).input||t.error("input is missing"),i.mixin(this),this.$hint=t(n.hint),this.$input=t(n.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=r(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}return n={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(i.prototype,s,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=n[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var n;switch(t){case"up":case"down":n=!a(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){return"tab"!==t||!a(e)},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var n,i;i=!!(n=o(t,this.query))&&this.query.length!==t.length,this.query=t,e||n?!e&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,i,s,r,o=this;return t=e.bind(this._onBlur,this),i=e.bind(this._onFocus,this),s=e.bind(this._onKeydown,this),r=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",i).on("keydown.tt",s),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",r):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",(function(t){n[t.which||t.keyCode]||e.defer(e.bind(o._onInput,o,t))})),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n;n=(t=this.getInputValue())!==(e=this.getHint())&&0===e.indexOf(t),(""===t||!n||this.hasOverflow())&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,n,i;return t=this.$input.val().length,n=this.$input[0].selectionStart,e.isNumber(n)?n===t:!document.selection||((i=document.selection.createRange()).moveStart("character",-t),t===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),i;function r(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function o(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function a(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}}(),a=function(){var n,i;function o(n,s){(n=n||{}).templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||t.error("missing source"),n.node||t.error("missing node"),n.name&&!u(n.name)&&t.error("invalid dataset name: "+n.name),s.mixin(this),this.highlight=!!n.highlight,this.name=n.name||i(),this.limit=n.limit||5,this.displayFn=a(n.display||n.displayKey),this.templates=c(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=e.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=t(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}return n={val:"tt-selectable-display",obj:"tt-selectable-object"},i=e.getIdGenerator(),o.extractData=function(e){var i=t(e);return i.data(n.obj)?{val:i.data(n.val)||"",obj:i.data(n.obj)||null}:null},e.mixin(o.prototype,s,{_overwrite:function(t,e){(e=e||[]).length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){(e=e||[]).length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var n;n=this._getSuggestionsFragment(t,e),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var n,i;i=(n=this._getSuggestionsFragment(t,e)).children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,s){var o,a=this;return o=document.createDocumentFragment(),e.each(s,(function(e){var s,r;r=a._injectQuery(i,e),s=t(a.templates.suggestion(r)).data(n.obj,e).data(n.val,a.displayFn(e)).addClass(a.classes.suggestion+" "+a.classes.selectable),o.appendChild(s[0])})),this.highlight&&r({className:this.classes.highlight,node:o,pattern:i}),t(o)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,n){return e.isObject(n)?e.mixin({_query:t},n):n},update:function(e){var n=this,i=!1,s=!1,r=0;function o(t){s||(s=!0,t=(t||[]).slice(0,n.limit),r=t.length,n._overwrite(e,t),r<n.limit&&n.async&&n.trigger("asyncRequested",e))}function a(s){s=s||[],!i&&r<n.limit&&(n.cancel=t.noop,r+=s.length,n._append(e,s.slice(0,n.limit-r)),n.async&&n.trigger("asyncReceived",e))}this.cancel(),this.cancel=function(){i=!0,n.cancel=t.noop,n.async&&n.trigger("asyncCanceled",e)},this.source(e,o,a),!s&&o([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),o;function a(t){return t=t||e.stringify,e.isFunction(t)?t:n;function n(e){return e[t]}}function c(n,i){return{notFound:n.notFound&&e.templatify(n.notFound),pending:n.pending&&e.templatify(n.pending),header:n.header&&e.templatify(n.header),footer:n.footer&&e.templatify(n.footer),suggestion:n.suggestion||s};function s(e){return t("<div>").text(i(e))}}function u(t){return/^[_a-zA-Z0-9-]+$/.test(t)}}(),c=function(){function n(n,i){var s=this;function r(e){var n=s.$node.find(e.node).first();return e.node=n.length?n:t("<div>").appendTo(s.$node),new a(e,i)}(n=n||{}).node||t.error("node is required"),i.mixin(this),this.$node=t(n.node),this.query=null,this.datasets=e.map(n.datasets,r)}return e.mixin(n.prototype,s,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return e.every(this.datasets,t);function t(t){return t.isEmpty()}},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,n,i,s;n=(e=t.position().top)+t.outerHeight(!0),i=this.$node.scrollTop(),s=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),e<0?this.$node.scrollTop(i+e):s<n&&this.$node.scrollTop(i+(n-s))},bind:function(){var t,n=this;return t=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),e.each(this.datasets,(function(t){t.onSync("asyncRequested",n._propagate,n).onSync("asyncCanceled",n._propagate,n).onSync("asyncReceived",n._propagate,n).onSync("rendered",n._onRendered,n).onSync("cleared",n._onCleared,n)})),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,n,i;return n=this.getActiveSelectable(),e=this._getSelectables(),-1===(i=(i=((i=(n?e.index(n):-1)+t)+1)%(e.length+1)-1)<-1?e.length-1:i)?null:e.eq(i)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?a.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){var n=t!==this.query;return n&&(this.query=t,e.each(this.datasets,i)),n;function i(e){e.update(t)}},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function n(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,n)}}),n}(),u=function(){var t=c.prototype;function n(){c.apply(this,[].slice.call(arguments,0))}return e.mixin(n.prototype,c.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),t.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),t.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),t._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),t._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(e){return this.$node.css("ltr"===e?this.css.ltr:this.css.rtl),t.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),n}(),h=function(){function n(n,s){var r,o,a,c,u,h,l,d,p,f,g;(n=n||{}).input||t.error("missing input"),n.menu||t.error("missing menu"),n.eventBus||t.error("missing event bus"),s.mixin(this),this.eventBus=n.eventBus,this.minLength=e.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),r=i(this,"activate","open","_onFocused"),o=i(this,"deactivate","_onBlurred"),a=i(this,"isActive","isOpen","_onEnterKeyed"),c=i(this,"isActive","isOpen","_onTabKeyed"),u=i(this,"isActive","_onEscKeyed"),h=i(this,"isActive","open","_onUpKeyed"),l=i(this,"isActive","open","_onDownKeyed"),d=i(this,"isActive","isOpen","_onLeftKeyed"),p=i(this,"isActive","isOpen","_onRightKeyed"),f=i(this,"_openIfActive","_onQueryChanged"),g=i(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",r,this).onSync("blurred",o,this).onSync("enterKeyed",a,this).onSync("tabKeyed",c,this).onSync("escKeyed",u,this).onSync("upKeyed",h,this).onSync("downKeyed",l,this).onSync("leftKeyed",d,this).onSync("rightKeyed",p,this).onSync("queryChanged",f,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this)}return e.mixin(n.prototype,{_hacks:function(){var n,i;n=this.input.$input||t("<div>"),i=this.menu.$node||t("<div>"),n.on("blur.tt",(function(t){var s,r,o;s=document.activeElement,r=i.is(s),o=i.has(s).length>0,e.isMsie()&&(r||o)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer((function(){n.focus()})))})),i.on("mousedown.tt",(function(t){t.preventDefault()}))},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,e)},_onAsyncRequested:function(t,e,n){this.eventBus.trigger("asyncrequest",n,e)},_onAsyncCanceled:function(t,e,n){this.eventBus.trigger("asynccancel",n,e)},_onAsyncReceived:function(t,e,n){this.eventBus.trigger("asyncreceive",n,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&e.preventDefault()},_onTabKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&e.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return(t=e.isString(t)?t:this.input.getQuery()||"").length>=this.minLength},_updateHint:function(){var t,n,i,s,r,a;t=this.menu.getTopSelectable(),n=this.menu.getSelectableData(t),i=this.input.getInputValue(),!n||e.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(s=o.normalizeQuery(i),r=e.escapeRegExChars(s),(a=new RegExp("^(?:"+r+")(.+$)","i").exec(n.val))&&this.input.setHint(i+a[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return!(!e||this.eventBus.before("select",e.obj)||(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),0))},autocomplete:function(t){var e,n;return e=this.input.getQuery(),!(!(n=this.menu.getSelectableData(t))||e===n.val||this.eventBus.before("autocomplete",n.obj)||(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),0))},moveCursor:function(t){var e,n,i,s;return e=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(t),s=(i=this.menu.getSelectableData(n))?i.obj:null,!(this._minLengthMet()&&this.menu.update(e)||this.eventBus.before("cursorchange",s)||(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",s),0))},destroy:function(){this.input.destroy(),this.menu.destroy()}}),n;function i(t){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);e.each(n,(function(e){return t[e].apply(t,i)}))}}}();!function(){var s,r,a;function l(e,n){e.each((function(){var e,i=t(this);(e=i.data(r.typeahead))&&n(e,i)}))}function d(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(f(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function p(t,e){t.data(r.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(t){}return t}function f(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function g(t){var n,i;n=t.data(r.www),i=t.parent().filter(n.selectors.wrapper),e.each(t.data(r.attrs),(function(n,i){e.isUndefined(n)?t.removeAttr(i):t.attr(i,n)})),t.removeData(r.typeahead).removeData(r.www).removeData(r.attr).removeClass(n.classes.input),i.length&&(t.detach().insertAfter(i),i.remove())}function m(n){var i;return(i=e.isJQuery(n)||e.isElement(n)?t(n).first():[]).length?i:null}s=t.fn.typeahead,r={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},a={initialize:function(s,a){var l;return a=e.isArray(a)?a:[].slice.call(arguments,1),l=n((s=s||{}).classNames),this.each(f);function f(){var n,f,g,y,v,_,b,w,x,k,S;e.each(a,(function(t){t.highlight=!!s.highlight})),n=t(this),f=t(l.html.wrapper),g=m(s.hint),y=m(s.menu),v=!1!==s.hint&&!g,_=!1!==s.menu&&!y,v&&(g=d(n,l)),_&&(y=t(l.html.menu).css(l.css.menu)),g&&g.val(""),n=p(n,l),(v||_)&&(f.css(l.css.wrapper),n.css(v?l.css.input:l.css.inputWithNoHint),n.wrap(f).parent().prepend(v?g:null).append(_?y:null)),S=_?u:c,b=new i({el:n}),w=new o({hint:g,input:n},l),x=new S({node:y,datasets:a},l),k=new h({input:w,menu:x,eventBus:b,minLength:s.minLength},l),n.data(r.www,l),n.data(r.typeahead,k)}},isEnabled:function(){var t;return l(this.first(),(function(e){t=e.isEnabled()})),t},enable:function(){return l(this,(function(t){t.enable()})),this},disable:function(){return l(this,(function(t){t.disable()})),this},isActive:function(){var t;return l(this.first(),(function(e){t=e.isActive()})),t},activate:function(){return l(this,(function(t){t.activate()})),this},deactivate:function(){return l(this,(function(t){t.deactivate()})),this},isOpen:function(){var t;return l(this.first(),(function(e){t=e.isOpen()})),t},open:function(){return l(this,(function(t){t.open()})),this},close:function(){return l(this,(function(t){t.close()})),this},select:function(e){var n=!1,i=t(e);return l(this.first(),(function(t){n=t.select(i)})),n},autocomplete:function(e){var n=!1,i=t(e);return l(this.first(),(function(t){n=t.autocomplete(i)})),n},moveCursor:function(t){var e=!1;return l(this.first(),(function(n){e=n.moveCursor(t)})),e},val:function(t){var e;return arguments.length?(l(this,(function(e){e.setVal(t)})),this):(l(this.first(),(function(t){e=t.getVal()})),e)},destroy:function(){return l(this,(function(t,e){g(e),t.destroy()})),this}},t.fn.typeahead=function(t){return a[t]?a[t].apply(this,[].slice.call(arguments,1)):a.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=s,this}}()})(i.default);var r={exports:{}};
/*!
	 * typeahead.js 0.11.1
	 * https://github.com/twitter/typeahead.js
	 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
	 */!function(t,e){t.exports=function(t){var e={isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,(function(t,s){if(!(i=n.call(null,s,t,e)))return!1})),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,(function(t,s){if(i=n.call(null,s,t,e))return!1})),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){return t.isFunction(e)?e:n;function n(){return String(e)}},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,s;return function(){var r,o,a=this,c=arguments;return r=function(){i=null,n||(s=t.apply(a,c))},o=n&&!i,clearTimeout(i),i=setTimeout(r,e),o&&(s=t.apply(a,c)),s}},throttle:function(t,e){var n,i,s,r,o,a;return o=0,a=function(){o=new Date,s=null,r=t.apply(n,i)},function(){var c=new Date,u=e-(c-o);return n=this,i=arguments,u<=0?(clearTimeout(s),s=null,o=c,r=t.apply(n,i)):s||(s=setTimeout(a,u)),r}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}},n="0.11.1",i=function(){return{nonword:n,whitespace:t,obj:{nonword:i(n),whitespace:i(t)}};function t(t){return(t=e.toStr(t))?t.split(/\s+/):[]}function n(t){return(t=e.toStr(t))?t.split(/\W+/):[]}function i(t){return function(n){return n=e.isArray(n)?n:[].slice.call(arguments,0),function(i){var s=[];return e.each(n,(function(n){s=s.concat(t(e.toStr(i[n])))})),s}}}}(),s=function(){function n(n){this.maxSize=e.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function i(){this.head=this.tail=null}function s(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(n.prototype,{set:function(t,e){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key],this.size--),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new s(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function(t){var e=this.hash[t];if(e)return this.list.moveToFront(e),e.val},reset:function(){this.size=0,this.hash={},this.list=new i}}),e.mixin(i.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),n}(),r=function(){var n;try{(n=window.localStorage).setItem("~~~","!"),n.removeItem("~~~")}catch(t){n=null}function i(t,i){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=i||n,!this.ls&&this._noop()}return e.mixin(i.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(t){"QuotaExceededError"===t.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),o(this.ls.getItem(this._prefix(t)))},set:function(t,n,i){return e.isNumber(i)?this._safeSet(this._ttlKey(t),r(s()+i)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),r(n))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=a(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var n=o(this.ls.getItem(this._ttlKey(t)));return!!(e.isNumber(n)&&s()>n)}}),i;function s(){return(new Date).getTime()}function r(t){return JSON.stringify(e.isUndefined(t)?null:t)}function o(e){return t.parseJSON(e)}function a(t){var e,i,s=[],r=n.length;for(e=0;e<r;e++)(i=n.key(e)).match(t)&&s.push(i.replace(t,""));return s}}(),o=function(){var n=0,i={},r=6,o=new s(10);function a(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=!1===t.cache?new s(0):o}return a.setMaxPendingRequests=function(t){r=t},a.resetCache=function(){o.reset()},e.mixin(a.prototype,{_fingerprint:function(e){return(e=e||{}).url+e.type+t.param(e.data||{})},_get:function(t,e){var s,o,a=this;function c(t){e(null,t),a._cache.set(s,t)}function u(){e(!0)}function h(){n--,delete i[s],a.onDeckRequestArgs&&(a._get.apply(a,a.onDeckRequestArgs),a.onDeckRequestArgs=null)}s=this._fingerprint(t),this.cancelled||s!==this.lastReq||((o=i[s])?o.done(c).fail(u):n<r?(n++,i[s]=this._send(t).done(c).fail(u).always(h)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(n,i){var s,r;i=i||t.noop,n=e.isString(n)?{url:n}:n||{},r=this._fingerprint(n),this.cancelled=!1,this.lastReq=r,(s=this._cache.get(r))?i(null,s):this._get(n,i)},cancel:function(){this.cancelled=!0}}),a}(),a=window.SearchIndex=function(){var n="c",i="i";function s(n){(n=n||{}).datumTokenizer&&n.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=n.identify||e.stringify,this.datumTokenizer=n.datumTokenizer,this.queryTokenizer=n.queryTokenizer,this.reset()}return e.mixin(s.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var s=this;t=e.isArray(t)?t:[t],e.each(t,(function(t){var a,c;s.datums[a=s.identify(t)]=t,c=r(s.datumTokenizer(t)),e.each(c,(function(t){var e,r,c;for(e=s.trie,r=t.split("");c=r.shift();)(e=e[n][c]||(e[n][c]=o()))[i].push(a)}))}))},get:function(t){var n=this;return e.map(t,(function(t){return n.datums[t]}))},search:function(t){var s,o,u=this;return s=r(this.queryTokenizer(t)),e.each(s,(function(t){var e,s,r,a;if(o&&0===o.length)return!1;for(e=u.trie,s=t.split("");e&&(r=s.shift());)e=e[n][r];if(!e||0!==s.length)return o=[],!1;a=e[i].slice(0),o=o?c(o,a):a})),o?e.map(a(o),(function(t){return u.datums[t]})):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=o()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),s;function r(t){return t=e.filter(t,(function(t){return!!t})),t=e.map(t,(function(t){return t.toLowerCase()}))}function o(){var t={};return t[i]=[],t[n]={},t}function a(t){for(var e={},n=[],i=0,s=t.length;i<s;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function c(t,e){var n=0,i=0,s=[];t=t.sort(),e=e.sort();for(var r=t.length,o=e.length;n<r&&i<o;)t[n]<e[i]?n++:(t[n]>e[i]||(s.push(t[n]),n++),i++);return s}}(),c=function(){var t;function n(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new r(t.cacheKey)}return t={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(n.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(e){this.cache&&(this.storage.set(t.data,e,this.ttl),this.storage.set(t.protocol,location.protocol,this.ttl),this.storage.set(t.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var e,n={};return this.cache?(n.data=this.storage.get(t.data),n.protocol=this.storage.get(t.protocol),n.thumbprint=this.storage.get(t.thumbprint),e=n.thumbprint!==this.thumbprint||n.protocol!==location.protocol,n.data&&!e?n.data:null):null},fromNetwork:function(t){var e,n=this;function i(){t(!0)}function s(e){t(null,n.transform(e))}t&&(e=this.prepare(this._settings()),this.transport(e).fail(i).done(s))},clear:function(){return this.storage.clear(),this}}),n}(),u=function(){function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new o({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){var n,i=this;if(e)return t=t||"",n=this.prepare(t,this._settings()),this.transport.get(n,s);function s(t,n){e(t?[]:i.transform(n))}},cancelLastRequest:function(){this.transport.cancel()}}),t}(),h=function(){return function(n){var r,o;return r={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},!(n=e.mixin(r,n||{})).datumTokenizer&&t.error("datumTokenizer is required"),!n.queryTokenizer&&t.error("queryTokenizer is required"),o=n.sorter,n.sorter=o?function(t){return t.sort(o)}:e.identity,n.local=e.isFunction(n.local)?n.local():n.local,n.prefetch=i(n.prefetch),n.remote=s(n.remote),n};function i(i){var s;return i?(s={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,!(i=e.mixin(s,i)).url&&t.error("prefetch requires url to be set"),i.transform=i.filter||i.transform,i.cacheKey=i.cacheKey||i.url,i.thumbprint=n+i.thumbprint,i.transport=i.transport?a(i.transport):t.ajax,i):null}function s(n){var i;if(n)return i={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,!(n=e.mixin(i,n)).url&&t.error("remote requires url to be set"),n.transform=n.filter||n.transform,n.prepare=r(n),n.limiter=o(n),n.transport=n.transport?a(n.transport):t.ajax,delete n.replace,delete n.wildcard,delete n.rateLimitBy,delete n.rateLimitWait,n}function r(t){var e,n,i;return e=t.prepare,n=t.replace,i=t.wildcard,e||(e=n?s:t.wildcard?r:o);function s(t,e){return e.url=n(e.url,t),e}function r(t,e){return e.url=e.url.replace(i,encodeURIComponent(t)),e}function o(t,e){return e}}function o(t){var n,i,s;return n=t.limiter,i=t.rateLimitBy,s=t.rateLimitWait,n||(n=/^throttle$/i.test(i)?o(s):r(s)),n;function r(t){return function(n){return e.debounce(n,t)}}function o(t){return function(n){return e.throttle(n,t)}}}function a(n){return function(i){var s=t.Deferred();return n(i,r,o),s;function r(t){e.defer((function(){s.resolve(t)}))}function o(t){e.defer((function(){s.reject(t)}))}}}}(),l=function(){var n;function s(t){t=h(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new u(t.remote):null,this.prefetch=t.prefetch?new c(t.prefetch):null,this.index=new a({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),!1!==t.initialize&&this.initialize()}return n=window&&window.Bloodhound,s.noConflict=function(){return window&&(window.Bloodhound=n),s},s.tokenizers=i,e.mixin(s.prototype,{__ttAdapter:function(){var t=this;return this.remote?e:n;function e(e,n,i){return t.search(e,n,i)}function n(e,n){return t.search(e,n)}},_loadPrefetch:function(){var e,n,i=this;return e=t.Deferred(),this.prefetch?(n=this.prefetch.fromCache())?(this.index.bootstrap(n),e.resolve()):this.prefetch.fromNetwork(s):e.resolve(),e.promise();function s(t,n){if(t)return e.reject();i.add(n),i.prefetch.store(i.index.serialize()),e.resolve()}},_initialize:function(){var t=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(e),this.initPromise;function e(){t.add(t.local)}},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,n,i){var s,r=this;return s=this.sorter(this.index.search(t)),n(this.remote?s.slice():s),this.remote&&s.length<this.sufficient?this.remote.get(t,o):this.remote&&this.remote.cancelLastRequest(),this;function o(t){var n=[];e.each(t,(function(t){!e.some(s,(function(e){return r.identify(t)===r.identify(e)}))&&n.push(t)})),i&&i(n)}},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return o.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),s}();return l}(i.default)}(r);var o=r.exports;const a=function(){return/INPUT|SELECT|TEXTAREA/.test(document.activeElement.tagName)||"true"===document.activeElement.contentEditable};let c={store:{attachment:{type:"dashicon",icon:"dashicons-admin-media"},category:{type:"dashicon",icon:"dashicons-category"},nav_menu:{type:"dashicon",icon:"dashicons-menu"},nav_menu_item:{type:"dashicon",icon:"dashicons-admin-appearance"},page:{type:"dashicon",icon:"dashicons-admin-page"},post:{type:"dashicon",icon:"dashicons-admin-post"},post_tag:{type:"dashicon",icon:"dashicons-tag"},post_format:{type:"dashicon",icon:"dashicons-format-standard"},term:{type:"dashicon",icon:"dashicons-category"},user:{type:"dashicon",icon:"dashicons-admin-users"}},add:function(t,e,n){return this.store[t]||(this.store[t]={type:e,icon:n}),this.store[t]},remove:function(t){this.store[t]&&delete this.store[t]},get:function(t){return"object"==typeof this.store[t]&&this.store[t]}};class u{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.attributes=[],this.classes=[],this.href="",this.icon=null,this.iconClasses=["jarvis__icon"],this.iconKey="",this.iconStyle="",this.iconType="dashicon",this.kind="",this.prefix="",this.section="",this.title="",this.type="";for(let e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);"string"==typeof this.type&&this.type.length>0&&-1===this.attributes.indexOf(this.type)&&this.attributes.push(this.type),this.iconKey&&this.iconType&&this.icon&&!c.get(this.iconKey)&&c.add(this.iconKey,this.iconType,this.icon),this.setIcon(this.iconKey)}setIcon(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("image"===this.iconType&&this.icon)return;if(!c.get(t)&&this.kind)switch(this.kind){case"term":t="post_tag";break;case"post":t="post";break;case"user":t="user"}let e=c.get(t);return!!e&&(this.iconKey=t,this.iconType=e.type,this.icon=e.icon,"dashicon"===this.iconType&&(this.iconClasses.push("dashicons-before"),-1===this.iconClasses.indexOf(this.icon)&&this.iconClasses.push(this.icon)),this.icon)}}class h extends u{constructor(t){super(),this.link=t,this.section=jQuery(this.link).closest("li.menu-top").first(),this.prefix=this.section.find(".wp-menu-name").clone().children().remove().end().text(),this.kind="menu",this.type=this.kind,this.href=t.href,this.attributes.push(this.type),this.classes.push("jarvis__suggestion--".concat(this.kind)),jQuery(this.link).is(".wp-submenu a")?this.title="".concat(this.prefix," Â» ").concat(jQuery(this.link).clone().children().remove().end().text()):this.title=this.prefix;let e=this.section.find(".wp-menu-image").first(),n=this.section.find("> a").first();if(n.length>0){let t=n.attr("href");if(t.indexOf("?")>-1){let e=t.substr(t.indexOf("?")+1).split("&");for(let t=0;t<e.length;t++){let n=e[t].split("=");if(2===n.length&&"post_type"===n[0]&&n[1].length>0){this.iconKey=n[1];break}}}}if(this.iconKey||(this.iconKey=this.section.attr("id")),this.classes.push("jarvis__suggestion--".concat(this.iconKey)),e.length>0){if(!c.get(this.iconKey)){let t;switch(!0){case this.section.find(".wp-menu-image img").length>0:this.iconType="image",this.icon=this.section.find(".wp-menu-image img").first().attr("src");break;case e.hasClass("svg"):t=window.getComputedStyle(e.get(0)),/^url\("data:image\/svg\+xml\;base64,/.test(t.backgroundImage)&&(this.iconType="svg",this.icon=atob(t.backgroundImage.replace(/^url\("data:image\/svg\+xml\;base64,/,"").replace(/\"\)$/,"")),this.icon=this.icon.replace(/<\?xml [^>]+\?>/g,"").replace(/\sid="[^\"]+"/g,"").replace(/<!--[\s\S]*?-->/g,"").replace(/<(title|desc|defs)>[^<]+?<\/(title|desc|defs)>/g,""));break;case e.hasClass("dashicons-before"):if(t=window.getComputedStyle(e.get(0),":before"),"dashicons"===t.fontFamily)this.iconType="dashicon",this.icon=e.attr("class").trim().split(" ").filter((t=>-1===["dashicons-before","wp-menu-image"].indexOf(t))).shift(),this.iconClasses.push(this.icon),this.iconClasses.push("dashicons-before");else{let e=document.getElementById("jarvis_style");e||(e=document.createElement("style"),e.type="text/css",e.id="jarvis_style",document.head.appendChild(e));let n=".jarvis__suggestion--".concat(this.iconKey," .jarvis__icon::before { font-family: ").concat(t.fontFamily,"; content: ").concat(t.content,"; }")+"\n";e.appendChild(document.createTextNode(n))}}c.add(this.iconKey,this.iconType,this.icon)}this.setIcon(this.iconKey)}}}const l={suggestion:s.default.template('\n\t\t<span class="<% print( classes.join( \' \' ) ) %>">\n\t\t\t<a href="<%= href %>" data-type="<%= type %>">\n\t\t\t\t<span class="<% print( iconClasses.join( \' \' ) ) %>" style=\'<%= iconStyle %>\' title="<%= prefix %>">\n\t\t\t\t<% if ( iconType === \'image\' ) { %>\n\t\t\t\t\t<img src="<%= icon %>" alt="<%= title %>">\n\t\t\t\t<% } else if ( iconType === \'svg\' ) { %>\n\t\t\t\t\t<%= icon %>\n\t\t\t\t<% } %>\n\t\t\t\t</span>\n\t\t\t\t<span class="jarvis__title" title="<%= title %>"><%= title %></span>\n\t\t\t\t<% if ( attributes ) { %>\n\t\t\t\t\t<span class="jarvis__pills">\n\t\t\t\t\t\t<% _.each( attributes, function(attr) { %>\n\t\t\t\t\t\t\t<span class="jarvis__pill"><%= attr %></span>\n\t\t\t\t\t\t<% } ); %>\n\t\t\t\t\t</span>\n\t\t\t\t<% } %>\n\t\t\t</a>\n\t\t</span>\n\t')};return class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.iconStore=c,this.settings={hotkey:"/",searchurl:"/wp-json/jarvis/v1/search"};for(const e in t)t.hasOwnProperty(e)&&(this.settings[e]=t[e]);this.opened=!1,this.suggestions=[],this.instants=e,this.term="",this.ctrlKey=!1,this.node=document.createElement("div"),this.node.className="jarvis jarvis--".concat(this.settings.theme),this.node.id="jarvis",this.modal=document.createElement("div"),this.modal.className="jarvis__modal",this.overlay=document.createElement("div"),this.overlay.className="jarvis__overlay",this.overlay.addEventListener("click",(()=>this.close())),this.search=document.createElement("input"),this.search.type="text",this.$search=i.default(this.search),this.node.appendChild(this.overlay),this.node.appendChild(this.modal),this.modal.appendChild(this.search),this.loading=document.createElement("i"),this.loading.className="jarvis__loading",this.isJarvisUrl=function(t){const e=new URL(t,location.origin).pathname.match(/^\/wp-json\/jarvis\//);return e&&e.length>0},/complete|loaded/.test(document.readyState)?this.init():document.addEventListener("DOMContentLoaded",this.init.bind(this))}init(){i.default("#adminmenu a").each(((t,e)=>{this.suggestions.push(new h(e))})),Array.isArray(this.instants)&&(this.suggestions=this.suggestions.concat(this.instants.map((t=>new u(t))))),document.addEventListener("keydown",(t=>{t.key!==this.settings.hotkey||a()||(t.preventDefault(),t.stopPropagation())}),!0),i.default(document).on("click","#wp-admin-bar-jarvis_menubar_icon a",(t=>{t.preventDefault(),this.open()})),i.default(document).on("click",".jarvis__suggestion a",(t=>{!0!==t.ctrlKey&&"ajax"!==t.currentTarget.getAttribute("data-type")||t.preventDefault()})),i.default(document).on("keydown keyup","#jarvis-search",(t=>{this.ctrlKey=t.ctrlKey})),i.default(document).on("keyup",(t=>this.opened&&"Escape"===t.key?(t.preventDefault(),t.stopPropagation(),void this.close()):a()||this.opened||t.key!==this.settings.hotkey?void 0:(t.preventDefault(),t.stopPropagation(),this.open()))),i.default(document).ajaxSend(((t,e,n)=>{this.opened&&this.isJarvisUrl(n.url)&&(this.modal.appendChild(this.loading),e.setRequestHeader("X-WP-Nonce",this.settings.nonce))})),i.default(document).ajaxComplete(((t,e,n)=>{this.opened&&this.isJarvisUrl(n.url)&&this.loading.parentNode&&this.loading.parentNode.removeChild(this.loading)}))}open(){return this.opened=!0,document.body.appendChild(this.node),this.$search.typeahead({hint:!0,highlight:!0,minLength:1,classNames:{cursor:"jarvis__cursor",dataset:"jarvis__dataset",empty:"jarvis__empty",highlight:"jarvis__highlight",hint:"jarvis__hint",input:"jarvis__input",menu:"jarvis__menu",open:"jarvis__open",selectable:"jarvis__selectable",suggestion:"jarvis__suggestion",wrapper:"jarvis__wrap"}},{name:"results",limit:10,display:t=>function(t){const e=document.createElement("textarea");return e.innerHTML=t,e.value}(t.title),source:new o({local:this.suggestions,datumTokenizer:o.tokenizers.obj.whitespace("title"),queryTokenizer:o.tokenizers.whitespace,remote:{url:"".concat(this.settings.searchurl,"?q=%s"),wildcard:"%s",transform:t=>Array.isArray(t)?t.map((t=>new u(t,"remote"))):t}}),templates:{suggestion:t=>l.suggestion(t)}}),this.$search.on("typeahead:select",((t,e)=>{if("ajax"===e.type)return this.ajax(e);this.ctrlKey?window.open(e.href,"_blank"):location.href=e.href})),this.$search.on("keyup",(()=>{this.term=this.search.value})),this.$search.typeahead("val",this.term),this.$search.focus().select(),this}close(){return this.opened=!1,this.node.parentNode.removeChild(this.node),this.$search.typeahead("destroy"),this}toggle(){return this.opened?this.close():this.open()}ajax(t){this.modal.appendChild(this.loading),i.default.ajax({url:t.href,success:(t,e,n)=>{this.term="",this.loading.parentNode&&this.modal.removeChild(this.loading),this.close()},error:(t,e,n)=>{this.loading.parentNode&&this.modal.removeChild(this.loading)}})}}}(jQuery,lodash);
//# sourceMappingURL=jarvis.js.map
