{"version":3,"file":"jarvis.js","sources":["../../node_modules/typeahead.js/dist/typeahead.jquery.js","../../node_modules/typeahead.js/dist/bloodhound.js","../../js/jarvis.js"],"sourcesContent":["/*!\n * typeahead.js 0.11.1\n * https://github.com/twitter/typeahead.js\n * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT\n */\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(\"typeahead.js\", [ \"jquery\" ], function(a0) {\n            return factory(a0);\n        });\n    } else if (typeof exports === \"object\") {\n        module.exports = factory(require(\"jquery\"));\n    } else {\n        factory(jQuery);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            noop: function() {}\n        };\n    }();\n    var WWW = function() {\n        \"use strict\";\n        var defaultClassNames = {\n            wrapper: \"twitter-typeahead\",\n            input: \"tt-input\",\n            hint: \"tt-hint\",\n            menu: \"tt-menu\",\n            dataset: \"tt-dataset\",\n            suggestion: \"tt-suggestion\",\n            selectable: \"tt-selectable\",\n            empty: \"tt-empty\",\n            open: \"tt-open\",\n            cursor: \"tt-cursor\",\n            highlight: \"tt-highlight\"\n        };\n        return build;\n        function build(o) {\n            var www, classes;\n            classes = _.mixin({}, defaultClassNames, o);\n            www = {\n                css: buildCss(),\n                classes: classes,\n                html: buildHtml(classes),\n                selectors: buildSelectors(classes)\n            };\n            return {\n                css: www.css,\n                html: www.html,\n                classes: www.classes,\n                selectors: www.selectors,\n                mixin: function(o) {\n                    _.mixin(o, www);\n                }\n            };\n        }\n        function buildHtml(c) {\n            return {\n                wrapper: '<span class=\"' + c.wrapper + '\"></span>',\n                menu: '<div class=\"' + c.menu + '\"></div>'\n            };\n        }\n        function buildSelectors(classes) {\n            var selectors = {};\n            _.each(classes, function(v, k) {\n                selectors[k] = \".\" + v;\n            });\n            return selectors;\n        }\n        function buildCss() {\n            var css = {\n                wrapper: {\n                    position: \"relative\",\n                    display: \"inline-block\"\n                },\n                hint: {\n                    position: \"absolute\",\n                    top: \"0\",\n                    left: \"0\",\n                    borderColor: \"transparent\",\n                    boxShadow: \"none\",\n                    opacity: \"1\"\n                },\n                input: {\n                    position: \"relative\",\n                    verticalAlign: \"top\",\n                    backgroundColor: \"transparent\"\n                },\n                inputWithNoHint: {\n                    position: \"relative\",\n                    verticalAlign: \"top\"\n                },\n                menu: {\n                    position: \"absolute\",\n                    top: \"100%\",\n                    left: \"0\",\n                    zIndex: \"100\",\n                    display: \"none\"\n                },\n                ltr: {\n                    left: \"0\",\n                    right: \"auto\"\n                },\n                rtl: {\n                    left: \"auto\",\n                    right: \" 0\"\n                }\n            };\n            if (_.isMsie()) {\n                _.mixin(css.input, {\n                    backgroundImage: \"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\"\n                });\n            }\n            return css;\n        }\n    }();\n    var EventBus = function() {\n        \"use strict\";\n        var namespace, deprecationMap;\n        namespace = \"typeahead:\";\n        deprecationMap = {\n            render: \"rendered\",\n            cursorchange: \"cursorchanged\",\n            select: \"selected\",\n            autocomplete: \"autocompleted\"\n        };\n        function EventBus(o) {\n            if (!o || !o.el) {\n                $.error(\"EventBus initialized without el\");\n            }\n            this.$el = $(o.el);\n        }\n        _.mixin(EventBus.prototype, {\n            _trigger: function(type, args) {\n                var $e;\n                $e = $.Event(namespace + type);\n                (args = args || []).unshift($e);\n                this.$el.trigger.apply(this.$el, args);\n                return $e;\n            },\n            before: function(type) {\n                var args, $e;\n                args = [].slice.call(arguments, 1);\n                $e = this._trigger(\"before\" + type, args);\n                return $e.isDefaultPrevented();\n            },\n            trigger: function(type) {\n                var deprecatedType;\n                this._trigger(type, [].slice.call(arguments, 1));\n                if (deprecatedType = deprecationMap[type]) {\n                    this._trigger(deprecatedType, [].slice.call(arguments, 1));\n                }\n            }\n        });\n        return EventBus;\n    }();\n    var EventEmitter = function() {\n        \"use strict\";\n        var splitter = /\\s+/, nextTick = getNextTick();\n        return {\n            onSync: onSync,\n            onAsync: onAsync,\n            off: off,\n            trigger: trigger\n        };\n        function on(method, types, cb, context) {\n            var type;\n            if (!cb) {\n                return this;\n            }\n            types = types.split(splitter);\n            cb = context ? bindContext(cb, context) : cb;\n            this._callbacks = this._callbacks || {};\n            while (type = types.shift()) {\n                this._callbacks[type] = this._callbacks[type] || {\n                    sync: [],\n                    async: []\n                };\n                this._callbacks[type][method].push(cb);\n            }\n            return this;\n        }\n        function onAsync(types, cb, context) {\n            return on.call(this, \"async\", types, cb, context);\n        }\n        function onSync(types, cb, context) {\n            return on.call(this, \"sync\", types, cb, context);\n        }\n        function off(types) {\n            var type;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            while (type = types.shift()) {\n                delete this._callbacks[type];\n            }\n            return this;\n        }\n        function trigger(types) {\n            var type, callbacks, args, syncFlush, asyncFlush;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            args = [].slice.call(arguments, 1);\n            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {\n                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));\n                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));\n                syncFlush() && nextTick(asyncFlush);\n            }\n            return this;\n        }\n        function getFlush(callbacks, context, args) {\n            return flush;\n            function flush() {\n                var cancelled;\n                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {\n                    cancelled = callbacks[i].apply(context, args) === false;\n                }\n                return !cancelled;\n            }\n        }\n        function getNextTick() {\n            var nextTickFn;\n            if (window.setImmediate) {\n                nextTickFn = function nextTickSetImmediate(fn) {\n                    setImmediate(function() {\n                        fn();\n                    });\n                };\n            } else {\n                nextTickFn = function nextTickSetTimeout(fn) {\n                    setTimeout(function() {\n                        fn();\n                    }, 0);\n                };\n            }\n            return nextTickFn;\n        }\n        function bindContext(fn, context) {\n            return fn.bind ? fn.bind(context) : function() {\n                fn.apply(context, [].slice.call(arguments, 0));\n            };\n        }\n    }();\n    var highlight = function(doc) {\n        \"use strict\";\n        var defaults = {\n            node: null,\n            pattern: null,\n            tagName: \"strong\",\n            className: null,\n            wordsOnly: false,\n            caseSensitive: false\n        };\n        return function hightlight(o) {\n            var regex;\n            o = _.mixin({}, defaults, o);\n            if (!o.node || !o.pattern) {\n                return;\n            }\n            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];\n            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);\n            traverse(o.node, hightlightTextNode);\n            function hightlightTextNode(textNode) {\n                var match, patternNode, wrapperNode;\n                if (match = regex.exec(textNode.data)) {\n                    wrapperNode = doc.createElement(o.tagName);\n                    o.className && (wrapperNode.className = o.className);\n                    patternNode = textNode.splitText(match.index);\n                    patternNode.splitText(match[0].length);\n                    wrapperNode.appendChild(patternNode.cloneNode(true));\n                    textNode.parentNode.replaceChild(wrapperNode, patternNode);\n                }\n                return !!match;\n            }\n            function traverse(el, hightlightTextNode) {\n                var childNode, TEXT_NODE_TYPE = 3;\n                for (var i = 0; i < el.childNodes.length; i++) {\n                    childNode = el.childNodes[i];\n                    if (childNode.nodeType === TEXT_NODE_TYPE) {\n                        i += hightlightTextNode(childNode) ? 1 : 0;\n                    } else {\n                        traverse(childNode, hightlightTextNode);\n                    }\n                }\n            }\n        };\n        function getRegex(patterns, caseSensitive, wordsOnly) {\n            var escapedPatterns = [], regexStr;\n            for (var i = 0, len = patterns.length; i < len; i++) {\n                escapedPatterns.push(_.escapeRegExChars(patterns[i]));\n            }\n            regexStr = wordsOnly ? \"\\\\b(\" + escapedPatterns.join(\"|\") + \")\\\\b\" : \"(\" + escapedPatterns.join(\"|\") + \")\";\n            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, \"i\");\n        }\n    }(window.document);\n    var Input = function() {\n        \"use strict\";\n        var specialKeyCodeMap;\n        specialKeyCodeMap = {\n            9: \"tab\",\n            27: \"esc\",\n            37: \"left\",\n            39: \"right\",\n            13: \"enter\",\n            38: \"up\",\n            40: \"down\"\n        };\n        function Input(o, www) {\n            o = o || {};\n            if (!o.input) {\n                $.error(\"input is missing\");\n            }\n            www.mixin(this);\n            this.$hint = $(o.hint);\n            this.$input = $(o.input);\n            this.query = this.$input.val();\n            this.queryWhenFocused = this.hasFocus() ? this.query : null;\n            this.$overflowHelper = buildOverflowHelper(this.$input);\n            this._checkLanguageDirection();\n            if (this.$hint.length === 0) {\n                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;\n            }\n        }\n        Input.normalizeQuery = function(str) {\n            return _.toStr(str).replace(/^\\s*/g, \"\").replace(/\\s{2,}/g, \" \");\n        };\n        _.mixin(Input.prototype, EventEmitter, {\n            _onBlur: function onBlur() {\n                this.resetInputValue();\n                this.trigger(\"blurred\");\n            },\n            _onFocus: function onFocus() {\n                this.queryWhenFocused = this.query;\n                this.trigger(\"focused\");\n            },\n            _onKeydown: function onKeydown($e) {\n                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];\n                this._managePreventDefault(keyName, $e);\n                if (keyName && this._shouldTrigger(keyName, $e)) {\n                    this.trigger(keyName + \"Keyed\", $e);\n                }\n            },\n            _onInput: function onInput() {\n                this._setQuery(this.getInputValue());\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            _managePreventDefault: function managePreventDefault(keyName, $e) {\n                var preventDefault;\n                switch (keyName) {\n                  case \"up\":\n                  case \"down\":\n                    preventDefault = !withModifier($e);\n                    break;\n\n                  default:\n                    preventDefault = false;\n                }\n                preventDefault && $e.preventDefault();\n            },\n            _shouldTrigger: function shouldTrigger(keyName, $e) {\n                var trigger;\n                switch (keyName) {\n                  case \"tab\":\n                    trigger = !withModifier($e);\n                    break;\n\n                  default:\n                    trigger = true;\n                }\n                return trigger;\n            },\n            _checkLanguageDirection: function checkLanguageDirection() {\n                var dir = (this.$input.css(\"direction\") || \"ltr\").toLowerCase();\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.$hint.attr(\"dir\", dir);\n                    this.trigger(\"langDirChanged\", dir);\n                }\n            },\n            _setQuery: function setQuery(val, silent) {\n                var areEquivalent, hasDifferentWhitespace;\n                areEquivalent = areQueriesEquivalent(val, this.query);\n                hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;\n                this.query = val;\n                if (!silent && !areEquivalent) {\n                    this.trigger(\"queryChanged\", this.query);\n                } else if (!silent && hasDifferentWhitespace) {\n                    this.trigger(\"whitespaceChanged\", this.query);\n                }\n            },\n            bind: function() {\n                var that = this, onBlur, onFocus, onKeydown, onInput;\n                onBlur = _.bind(this._onBlur, this);\n                onFocus = _.bind(this._onFocus, this);\n                onKeydown = _.bind(this._onKeydown, this);\n                onInput = _.bind(this._onInput, this);\n                this.$input.on(\"blur.tt\", onBlur).on(\"focus.tt\", onFocus).on(\"keydown.tt\", onKeydown);\n                if (!_.isMsie() || _.isMsie() > 9) {\n                    this.$input.on(\"input.tt\", onInput);\n                } else {\n                    this.$input.on(\"keydown.tt keypress.tt cut.tt paste.tt\", function($e) {\n                        if (specialKeyCodeMap[$e.which || $e.keyCode]) {\n                            return;\n                        }\n                        _.defer(_.bind(that._onInput, that, $e));\n                    });\n                }\n                return this;\n            },\n            focus: function focus() {\n                this.$input.focus();\n            },\n            blur: function blur() {\n                this.$input.blur();\n            },\n            getLangDir: function getLangDir() {\n                return this.dir;\n            },\n            getQuery: function getQuery() {\n                return this.query || \"\";\n            },\n            setQuery: function setQuery(val, silent) {\n                this.setInputValue(val);\n                this._setQuery(val, silent);\n            },\n            hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {\n                return this.query !== this.queryWhenFocused;\n            },\n            getInputValue: function getInputValue() {\n                return this.$input.val();\n            },\n            setInputValue: function setInputValue(value) {\n                this.$input.val(value);\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            resetInputValue: function resetInputValue() {\n                this.setInputValue(this.query);\n            },\n            getHint: function getHint() {\n                return this.$hint.val();\n            },\n            setHint: function setHint(value) {\n                this.$hint.val(value);\n            },\n            clearHint: function clearHint() {\n                this.setHint(\"\");\n            },\n            clearHintIfInvalid: function clearHintIfInvalid() {\n                var val, hint, valIsPrefixOfHint, isValid;\n                val = this.getInputValue();\n                hint = this.getHint();\n                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;\n                isValid = val !== \"\" && valIsPrefixOfHint && !this.hasOverflow();\n                !isValid && this.clearHint();\n            },\n            hasFocus: function hasFocus() {\n                return this.$input.is(\":focus\");\n            },\n            hasOverflow: function hasOverflow() {\n                var constraint = this.$input.width() - 2;\n                this.$overflowHelper.text(this.getInputValue());\n                return this.$overflowHelper.width() >= constraint;\n            },\n            isCursorAtEnd: function() {\n                var valueLength, selectionStart, range;\n                valueLength = this.$input.val().length;\n                selectionStart = this.$input[0].selectionStart;\n                if (_.isNumber(selectionStart)) {\n                    return selectionStart === valueLength;\n                } else if (document.selection) {\n                    range = document.selection.createRange();\n                    range.moveStart(\"character\", -valueLength);\n                    return valueLength === range.text.length;\n                }\n                return true;\n            },\n            destroy: function destroy() {\n                this.$hint.off(\".tt\");\n                this.$input.off(\".tt\");\n                this.$overflowHelper.remove();\n                this.$hint = this.$input = this.$overflowHelper = $(\"<div>\");\n            }\n        });\n        return Input;\n        function buildOverflowHelper($input) {\n            return $('<pre aria-hidden=\"true\"></pre>').css({\n                position: \"absolute\",\n                visibility: \"hidden\",\n                whiteSpace: \"pre\",\n                fontFamily: $input.css(\"font-family\"),\n                fontSize: $input.css(\"font-size\"),\n                fontStyle: $input.css(\"font-style\"),\n                fontVariant: $input.css(\"font-variant\"),\n                fontWeight: $input.css(\"font-weight\"),\n                wordSpacing: $input.css(\"word-spacing\"),\n                letterSpacing: $input.css(\"letter-spacing\"),\n                textIndent: $input.css(\"text-indent\"),\n                textRendering: $input.css(\"text-rendering\"),\n                textTransform: $input.css(\"text-transform\")\n            }).insertAfter($input);\n        }\n        function areQueriesEquivalent(a, b) {\n            return Input.normalizeQuery(a) === Input.normalizeQuery(b);\n        }\n        function withModifier($e) {\n            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;\n        }\n    }();\n    var Dataset = function() {\n        \"use strict\";\n        var keys, nameGenerator;\n        keys = {\n            val: \"tt-selectable-display\",\n            obj: \"tt-selectable-object\"\n        };\n        nameGenerator = _.getIdGenerator();\n        function Dataset(o, www) {\n            o = o || {};\n            o.templates = o.templates || {};\n            o.templates.notFound = o.templates.notFound || o.templates.empty;\n            if (!o.source) {\n                $.error(\"missing source\");\n            }\n            if (!o.node) {\n                $.error(\"missing node\");\n            }\n            if (o.name && !isValidName(o.name)) {\n                $.error(\"invalid dataset name: \" + o.name);\n            }\n            www.mixin(this);\n            this.highlight = !!o.highlight;\n            this.name = o.name || nameGenerator();\n            this.limit = o.limit || 5;\n            this.displayFn = getDisplayFn(o.display || o.displayKey);\n            this.templates = getTemplates(o.templates, this.displayFn);\n            this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;\n            this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;\n            this._resetLastSuggestion();\n            this.$el = $(o.node).addClass(this.classes.dataset).addClass(this.classes.dataset + \"-\" + this.name);\n        }\n        Dataset.extractData = function extractData(el) {\n            var $el = $(el);\n            if ($el.data(keys.obj)) {\n                return {\n                    val: $el.data(keys.val) || \"\",\n                    obj: $el.data(keys.obj) || null\n                };\n            }\n            return null;\n        };\n        _.mixin(Dataset.prototype, EventEmitter, {\n            _overwrite: function overwrite(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (this.async && this.templates.pending) {\n                    this._renderPending(query);\n                } else if (!this.async && this.templates.notFound) {\n                    this._renderNotFound(query);\n                } else {\n                    this._empty();\n                }\n                this.trigger(\"rendered\", this.name, suggestions, false);\n            },\n            _append: function append(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length && this.$lastSuggestion.length) {\n                    this._appendSuggestions(query, suggestions);\n                } else if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (!this.$lastSuggestion.length && this.templates.notFound) {\n                    this._renderNotFound(query);\n                }\n                this.trigger(\"rendered\", this.name, suggestions, true);\n            },\n            _renderSuggestions: function renderSuggestions(query, suggestions) {\n                var $fragment;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                this.$lastSuggestion = $fragment.children().last();\n                this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));\n            },\n            _appendSuggestions: function appendSuggestions(query, suggestions) {\n                var $fragment, $lastSuggestion;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                $lastSuggestion = $fragment.children().last();\n                this.$lastSuggestion.after($fragment);\n                this.$lastSuggestion = $lastSuggestion;\n            },\n            _renderPending: function renderPending(query) {\n                var template = this.templates.pending;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _renderNotFound: function renderNotFound(query) {\n                var template = this.templates.notFound;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _empty: function empty() {\n                this.$el.empty();\n                this._resetLastSuggestion();\n            },\n            _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {\n                var that = this, fragment;\n                fragment = document.createDocumentFragment();\n                _.each(suggestions, function getSuggestionNode(suggestion) {\n                    var $el, context;\n                    context = that._injectQuery(query, suggestion);\n                    $el = $(that.templates.suggestion(context)).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + \" \" + that.classes.selectable);\n                    fragment.appendChild($el[0]);\n                });\n                this.highlight && highlight({\n                    className: this.classes.highlight,\n                    node: fragment,\n                    pattern: query\n                });\n                return $(fragment);\n            },\n            _getFooter: function getFooter(query, suggestions) {\n                return this.templates.footer ? this.templates.footer({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _getHeader: function getHeader(query, suggestions) {\n                return this.templates.header ? this.templates.header({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _resetLastSuggestion: function resetLastSuggestion() {\n                this.$lastSuggestion = $();\n            },\n            _injectQuery: function injectQuery(query, obj) {\n                return _.isObject(obj) ? _.mixin({\n                    _query: query\n                }, obj) : obj;\n            },\n            update: function update(query) {\n                var that = this, canceled = false, syncCalled = false, rendered = 0;\n                this.cancel();\n                this.cancel = function cancel() {\n                    canceled = true;\n                    that.cancel = $.noop;\n                    that.async && that.trigger(\"asyncCanceled\", query);\n                };\n                this.source(query, sync, async);\n                !syncCalled && sync([]);\n                function sync(suggestions) {\n                    if (syncCalled) {\n                        return;\n                    }\n                    syncCalled = true;\n                    suggestions = (suggestions || []).slice(0, that.limit);\n                    rendered = suggestions.length;\n                    that._overwrite(query, suggestions);\n                    if (rendered < that.limit && that.async) {\n                        that.trigger(\"asyncRequested\", query);\n                    }\n                }\n                function async(suggestions) {\n                    suggestions = suggestions || [];\n                    if (!canceled && rendered < that.limit) {\n                        that.cancel = $.noop;\n                        rendered += suggestions.length;\n                        that._append(query, suggestions.slice(0, that.limit - rendered));\n                        that.async && that.trigger(\"asyncReceived\", query);\n                    }\n                }\n            },\n            cancel: $.noop,\n            clear: function clear() {\n                this._empty();\n                this.cancel();\n                this.trigger(\"cleared\");\n            },\n            isEmpty: function isEmpty() {\n                return this.$el.is(\":empty\");\n            },\n            destroy: function destroy() {\n                this.$el = $(\"<div>\");\n            }\n        });\n        return Dataset;\n        function getDisplayFn(display) {\n            display = display || _.stringify;\n            return _.isFunction(display) ? display : displayFn;\n            function displayFn(obj) {\n                return obj[display];\n            }\n        }\n        function getTemplates(templates, displayFn) {\n            return {\n                notFound: templates.notFound && _.templatify(templates.notFound),\n                pending: templates.pending && _.templatify(templates.pending),\n                header: templates.header && _.templatify(templates.header),\n                footer: templates.footer && _.templatify(templates.footer),\n                suggestion: templates.suggestion || suggestionTemplate\n            };\n            function suggestionTemplate(context) {\n                return $(\"<div>\").text(displayFn(context));\n            }\n        }\n        function isValidName(str) {\n            return /^[_a-zA-Z0-9-]+$/.test(str);\n        }\n    }();\n    var Menu = function() {\n        \"use strict\";\n        function Menu(o, www) {\n            var that = this;\n            o = o || {};\n            if (!o.node) {\n                $.error(\"node is required\");\n            }\n            www.mixin(this);\n            this.$node = $(o.node);\n            this.query = null;\n            this.datasets = _.map(o.datasets, initializeDataset);\n            function initializeDataset(oDataset) {\n                var node = that.$node.find(oDataset.node).first();\n                oDataset.node = node.length ? node : $(\"<div>\").appendTo(that.$node);\n                return new Dataset(oDataset, www);\n            }\n        }\n        _.mixin(Menu.prototype, EventEmitter, {\n            _onSelectableClick: function onSelectableClick($e) {\n                this.trigger(\"selectableClicked\", $($e.currentTarget));\n            },\n            _onRendered: function onRendered(type, dataset, suggestions, async) {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetRendered\", dataset, suggestions, async);\n            },\n            _onCleared: function onCleared() {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetCleared\");\n            },\n            _propagate: function propagate() {\n                this.trigger.apply(this, arguments);\n            },\n            _allDatasetsEmpty: function allDatasetsEmpty() {\n                return _.every(this.datasets, isDatasetEmpty);\n                function isDatasetEmpty(dataset) {\n                    return dataset.isEmpty();\n                }\n            },\n            _getSelectables: function getSelectables() {\n                return this.$node.find(this.selectors.selectable);\n            },\n            _removeCursor: function _removeCursor() {\n                var $selectable = this.getActiveSelectable();\n                $selectable && $selectable.removeClass(this.classes.cursor);\n            },\n            _ensureVisible: function ensureVisible($el) {\n                var elTop, elBottom, nodeScrollTop, nodeHeight;\n                elTop = $el.position().top;\n                elBottom = elTop + $el.outerHeight(true);\n                nodeScrollTop = this.$node.scrollTop();\n                nodeHeight = this.$node.height() + parseInt(this.$node.css(\"paddingTop\"), 10) + parseInt(this.$node.css(\"paddingBottom\"), 10);\n                if (elTop < 0) {\n                    this.$node.scrollTop(nodeScrollTop + elTop);\n                } else if (nodeHeight < elBottom) {\n                    this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));\n                }\n            },\n            bind: function() {\n                var that = this, onSelectableClick;\n                onSelectableClick = _.bind(this._onSelectableClick, this);\n                this.$node.on(\"click.tt\", this.selectors.selectable, onSelectableClick);\n                _.each(this.datasets, function(dataset) {\n                    dataset.onSync(\"asyncRequested\", that._propagate, that).onSync(\"asyncCanceled\", that._propagate, that).onSync(\"asyncReceived\", that._propagate, that).onSync(\"rendered\", that._onRendered, that).onSync(\"cleared\", that._onCleared, that);\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                return this.$node.hasClass(this.classes.open);\n            },\n            open: function open() {\n                this.$node.addClass(this.classes.open);\n            },\n            close: function close() {\n                this.$node.removeClass(this.classes.open);\n                this._removeCursor();\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.attr(\"dir\", dir);\n            },\n            selectableRelativeToCursor: function selectableRelativeToCursor(delta) {\n                var $selectables, $oldCursor, oldIndex, newIndex;\n                $oldCursor = this.getActiveSelectable();\n                $selectables = this._getSelectables();\n                oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;\n                newIndex = oldIndex + delta;\n                newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;\n                newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;\n                return newIndex === -1 ? null : $selectables.eq(newIndex);\n            },\n            setCursor: function setCursor($selectable) {\n                this._removeCursor();\n                if ($selectable = $selectable && $selectable.first()) {\n                    $selectable.addClass(this.classes.cursor);\n                    this._ensureVisible($selectable);\n                }\n            },\n            getSelectableData: function getSelectableData($el) {\n                return $el && $el.length ? Dataset.extractData($el) : null;\n            },\n            getActiveSelectable: function getActiveSelectable() {\n                var $selectable = this._getSelectables().filter(this.selectors.cursor).first();\n                return $selectable.length ? $selectable : null;\n            },\n            getTopSelectable: function getTopSelectable() {\n                var $selectable = this._getSelectables().first();\n                return $selectable.length ? $selectable : null;\n            },\n            update: function update(query) {\n                var isValidUpdate = query !== this.query;\n                if (isValidUpdate) {\n                    this.query = query;\n                    _.each(this.datasets, updateDataset);\n                }\n                return isValidUpdate;\n                function updateDataset(dataset) {\n                    dataset.update(query);\n                }\n            },\n            empty: function empty() {\n                _.each(this.datasets, clearDataset);\n                this.query = null;\n                this.$node.addClass(this.classes.empty);\n                function clearDataset(dataset) {\n                    dataset.clear();\n                }\n            },\n            destroy: function destroy() {\n                this.$node.off(\".tt\");\n                this.$node = $(\"<div>\");\n                _.each(this.datasets, destroyDataset);\n                function destroyDataset(dataset) {\n                    dataset.destroy();\n                }\n            }\n        });\n        return Menu;\n    }();\n    var DefaultMenu = function() {\n        \"use strict\";\n        var s = Menu.prototype;\n        function DefaultMenu() {\n            Menu.apply(this, [].slice.call(arguments, 0));\n        }\n        _.mixin(DefaultMenu.prototype, Menu.prototype, {\n            open: function open() {\n                !this._allDatasetsEmpty() && this._show();\n                return s.open.apply(this, [].slice.call(arguments, 0));\n            },\n            close: function close() {\n                this._hide();\n                return s.close.apply(this, [].slice.call(arguments, 0));\n            },\n            _onRendered: function onRendered() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onRendered.apply(this, [].slice.call(arguments, 0));\n            },\n            _onCleared: function onCleared() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onCleared.apply(this, [].slice.call(arguments, 0));\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.css(dir === \"ltr\" ? this.css.ltr : this.css.rtl);\n                return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));\n            },\n            _hide: function hide() {\n                this.$node.hide();\n            },\n            _show: function show() {\n                this.$node.css(\"display\", \"block\");\n            }\n        });\n        return DefaultMenu;\n    }();\n    var Typeahead = function() {\n        \"use strict\";\n        function Typeahead(o, www) {\n            var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;\n            o = o || {};\n            if (!o.input) {\n                $.error(\"missing input\");\n            }\n            if (!o.menu) {\n                $.error(\"missing menu\");\n            }\n            if (!o.eventBus) {\n                $.error(\"missing event bus\");\n            }\n            www.mixin(this);\n            this.eventBus = o.eventBus;\n            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;\n            this.input = o.input;\n            this.menu = o.menu;\n            this.enabled = true;\n            this.active = false;\n            this.input.hasFocus() && this.activate();\n            this.dir = this.input.getLangDir();\n            this._hacks();\n            this.menu.bind().onSync(\"selectableClicked\", this._onSelectableClicked, this).onSync(\"asyncRequested\", this._onAsyncRequested, this).onSync(\"asyncCanceled\", this._onAsyncCanceled, this).onSync(\"asyncReceived\", this._onAsyncReceived, this).onSync(\"datasetRendered\", this._onDatasetRendered, this).onSync(\"datasetCleared\", this._onDatasetCleared, this);\n            onFocused = c(this, \"activate\", \"open\", \"_onFocused\");\n            onBlurred = c(this, \"deactivate\", \"_onBlurred\");\n            onEnterKeyed = c(this, \"isActive\", \"isOpen\", \"_onEnterKeyed\");\n            onTabKeyed = c(this, \"isActive\", \"isOpen\", \"_onTabKeyed\");\n            onEscKeyed = c(this, \"isActive\", \"_onEscKeyed\");\n            onUpKeyed = c(this, \"isActive\", \"open\", \"_onUpKeyed\");\n            onDownKeyed = c(this, \"isActive\", \"open\", \"_onDownKeyed\");\n            onLeftKeyed = c(this, \"isActive\", \"isOpen\", \"_onLeftKeyed\");\n            onRightKeyed = c(this, \"isActive\", \"isOpen\", \"_onRightKeyed\");\n            onQueryChanged = c(this, \"_openIfActive\", \"_onQueryChanged\");\n            onWhitespaceChanged = c(this, \"_openIfActive\", \"_onWhitespaceChanged\");\n            this.input.bind().onSync(\"focused\", onFocused, this).onSync(\"blurred\", onBlurred, this).onSync(\"enterKeyed\", onEnterKeyed, this).onSync(\"tabKeyed\", onTabKeyed, this).onSync(\"escKeyed\", onEscKeyed, this).onSync(\"upKeyed\", onUpKeyed, this).onSync(\"downKeyed\", onDownKeyed, this).onSync(\"leftKeyed\", onLeftKeyed, this).onSync(\"rightKeyed\", onRightKeyed, this).onSync(\"queryChanged\", onQueryChanged, this).onSync(\"whitespaceChanged\", onWhitespaceChanged, this).onSync(\"langDirChanged\", this._onLangDirChanged, this);\n        }\n        _.mixin(Typeahead.prototype, {\n            _hacks: function hacks() {\n                var $input, $menu;\n                $input = this.input.$input || $(\"<div>\");\n                $menu = this.menu.$node || $(\"<div>\");\n                $input.on(\"blur.tt\", function($e) {\n                    var active, isActive, hasActive;\n                    active = document.activeElement;\n                    isActive = $menu.is(active);\n                    hasActive = $menu.has(active).length > 0;\n                    if (_.isMsie() && (isActive || hasActive)) {\n                        $e.preventDefault();\n                        $e.stopImmediatePropagation();\n                        _.defer(function() {\n                            $input.focus();\n                        });\n                    }\n                });\n                $menu.on(\"mousedown.tt\", function($e) {\n                    $e.preventDefault();\n                });\n            },\n            _onSelectableClicked: function onSelectableClicked(type, $el) {\n                this.select($el);\n            },\n            _onDatasetCleared: function onDatasetCleared() {\n                this._updateHint();\n            },\n            _onDatasetRendered: function onDatasetRendered(type, dataset, suggestions, async) {\n                this._updateHint();\n                this.eventBus.trigger(\"render\", suggestions, async, dataset);\n            },\n            _onAsyncRequested: function onAsyncRequested(type, dataset, query) {\n                this.eventBus.trigger(\"asyncrequest\", query, dataset);\n            },\n            _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {\n                this.eventBus.trigger(\"asynccancel\", query, dataset);\n            },\n            _onAsyncReceived: function onAsyncReceived(type, dataset, query) {\n                this.eventBus.trigger(\"asyncreceive\", query, dataset);\n            },\n            _onFocused: function onFocused() {\n                this._minLengthMet() && this.menu.update(this.input.getQuery());\n            },\n            _onBlurred: function onBlurred() {\n                if (this.input.hasQueryChangedSinceLastFocus()) {\n                    this.eventBus.trigger(\"change\", this.input.getQuery());\n                }\n            },\n            _onEnterKeyed: function onEnterKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                }\n            },\n            _onTabKeyed: function onTabKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                } else if ($selectable = this.menu.getTopSelectable()) {\n                    this.autocomplete($selectable) && $e.preventDefault();\n                }\n            },\n            _onEscKeyed: function onEscKeyed() {\n                this.close();\n            },\n            _onUpKeyed: function onUpKeyed() {\n                this.moveCursor(-1);\n            },\n            _onDownKeyed: function onDownKeyed() {\n                this.moveCursor(+1);\n            },\n            _onLeftKeyed: function onLeftKeyed() {\n                if (this.dir === \"rtl\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getTopSelectable());\n                }\n            },\n            _onRightKeyed: function onRightKeyed() {\n                if (this.dir === \"ltr\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getTopSelectable());\n                }\n            },\n            _onQueryChanged: function onQueryChanged(e, query) {\n                this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();\n            },\n            _onWhitespaceChanged: function onWhitespaceChanged() {\n                this._updateHint();\n            },\n            _onLangDirChanged: function onLangDirChanged(e, dir) {\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.menu.setLanguageDirection(dir);\n                }\n            },\n            _openIfActive: function openIfActive() {\n                this.isActive() && this.open();\n            },\n            _minLengthMet: function minLengthMet(query) {\n                query = _.isString(query) ? query : this.input.getQuery() || \"\";\n                return query.length >= this.minLength;\n            },\n            _updateHint: function updateHint() {\n                var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;\n                $selectable = this.menu.getTopSelectable();\n                data = this.menu.getSelectableData($selectable);\n                val = this.input.getInputValue();\n                if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {\n                    query = Input.normalizeQuery(val);\n                    escapedQuery = _.escapeRegExChars(query);\n                    frontMatchRegEx = new RegExp(\"^(?:\" + escapedQuery + \")(.+$)\", \"i\");\n                    match = frontMatchRegEx.exec(data.val);\n                    match && this.input.setHint(val + match[1]);\n                } else {\n                    this.input.clearHint();\n                }\n            },\n            isEnabled: function isEnabled() {\n                return this.enabled;\n            },\n            enable: function enable() {\n                this.enabled = true;\n            },\n            disable: function disable() {\n                this.enabled = false;\n            },\n            isActive: function isActive() {\n                return this.active;\n            },\n            activate: function activate() {\n                if (this.isActive()) {\n                    return true;\n                } else if (!this.isEnabled() || this.eventBus.before(\"active\")) {\n                    return false;\n                } else {\n                    this.active = true;\n                    this.eventBus.trigger(\"active\");\n                    return true;\n                }\n            },\n            deactivate: function deactivate() {\n                if (!this.isActive()) {\n                    return true;\n                } else if (this.eventBus.before(\"idle\")) {\n                    return false;\n                } else {\n                    this.active = false;\n                    this.close();\n                    this.eventBus.trigger(\"idle\");\n                    return true;\n                }\n            },\n            isOpen: function isOpen() {\n                return this.menu.isOpen();\n            },\n            open: function open() {\n                if (!this.isOpen() && !this.eventBus.before(\"open\")) {\n                    this.menu.open();\n                    this._updateHint();\n                    this.eventBus.trigger(\"open\");\n                }\n                return this.isOpen();\n            },\n            close: function close() {\n                if (this.isOpen() && !this.eventBus.before(\"close\")) {\n                    this.menu.close();\n                    this.input.clearHint();\n                    this.input.resetInputValue();\n                    this.eventBus.trigger(\"close\");\n                }\n                return !this.isOpen();\n            },\n            setVal: function setVal(val) {\n                this.input.setQuery(_.toStr(val));\n            },\n            getVal: function getVal() {\n                return this.input.getQuery();\n            },\n            select: function select($selectable) {\n                var data = this.menu.getSelectableData($selectable);\n                if (data && !this.eventBus.before(\"select\", data.obj)) {\n                    this.input.setQuery(data.val, true);\n                    this.eventBus.trigger(\"select\", data.obj);\n                    this.close();\n                    return true;\n                }\n                return false;\n            },\n            autocomplete: function autocomplete($selectable) {\n                var query, data, isValid;\n                query = this.input.getQuery();\n                data = this.menu.getSelectableData($selectable);\n                isValid = data && query !== data.val;\n                if (isValid && !this.eventBus.before(\"autocomplete\", data.obj)) {\n                    this.input.setQuery(data.val);\n                    this.eventBus.trigger(\"autocomplete\", data.obj);\n                    return true;\n                }\n                return false;\n            },\n            moveCursor: function moveCursor(delta) {\n                var query, $candidate, data, payload, cancelMove;\n                query = this.input.getQuery();\n                $candidate = this.menu.selectableRelativeToCursor(delta);\n                data = this.menu.getSelectableData($candidate);\n                payload = data ? data.obj : null;\n                cancelMove = this._minLengthMet() && this.menu.update(query);\n                if (!cancelMove && !this.eventBus.before(\"cursorchange\", payload)) {\n                    this.menu.setCursor($candidate);\n                    if (data) {\n                        this.input.setInputValue(data.val);\n                    } else {\n                        this.input.resetInputValue();\n                        this._updateHint();\n                    }\n                    this.eventBus.trigger(\"cursorchange\", payload);\n                    return true;\n                }\n                return false;\n            },\n            destroy: function destroy() {\n                this.input.destroy();\n                this.menu.destroy();\n            }\n        });\n        return Typeahead;\n        function c(ctx) {\n            var methods = [].slice.call(arguments, 1);\n            return function() {\n                var args = [].slice.call(arguments);\n                _.each(methods, function(method) {\n                    return ctx[method].apply(ctx, args);\n                });\n            };\n        }\n    }();\n    (function() {\n        \"use strict\";\n        var old, keys, methods;\n        old = $.fn.typeahead;\n        keys = {\n            www: \"tt-www\",\n            attrs: \"tt-attrs\",\n            typeahead: \"tt-typeahead\"\n        };\n        methods = {\n            initialize: function initialize(o, datasets) {\n                var www;\n                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);\n                o = o || {};\n                www = WWW(o.classNames);\n                return this.each(attach);\n                function attach() {\n                    var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, typeahead, MenuConstructor;\n                    _.each(datasets, function(d) {\n                        d.highlight = !!o.highlight;\n                    });\n                    $input = $(this);\n                    $wrapper = $(www.html.wrapper);\n                    $hint = $elOrNull(o.hint);\n                    $menu = $elOrNull(o.menu);\n                    defaultHint = o.hint !== false && !$hint;\n                    defaultMenu = o.menu !== false && !$menu;\n                    defaultHint && ($hint = buildHintFromInput($input, www));\n                    defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));\n                    $hint && $hint.val(\"\");\n                    $input = prepInput($input, www);\n                    if (defaultHint || defaultMenu) {\n                        $wrapper.css(www.css.wrapper);\n                        $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);\n                        $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);\n                    }\n                    MenuConstructor = defaultMenu ? DefaultMenu : Menu;\n                    eventBus = new EventBus({\n                        el: $input\n                    });\n                    input = new Input({\n                        hint: $hint,\n                        input: $input\n                    }, www);\n                    menu = new MenuConstructor({\n                        node: $menu,\n                        datasets: datasets\n                    }, www);\n                    typeahead = new Typeahead({\n                        input: input,\n                        menu: menu,\n                        eventBus: eventBus,\n                        minLength: o.minLength\n                    }, www);\n                    $input.data(keys.www, www);\n                    $input.data(keys.typeahead, typeahead);\n                }\n            },\n            isEnabled: function isEnabled() {\n                var enabled;\n                ttEach(this.first(), function(t) {\n                    enabled = t.isEnabled();\n                });\n                return enabled;\n            },\n            enable: function enable() {\n                ttEach(this, function(t) {\n                    t.enable();\n                });\n                return this;\n            },\n            disable: function disable() {\n                ttEach(this, function(t) {\n                    t.disable();\n                });\n                return this;\n            },\n            isActive: function isActive() {\n                var active;\n                ttEach(this.first(), function(t) {\n                    active = t.isActive();\n                });\n                return active;\n            },\n            activate: function activate() {\n                ttEach(this, function(t) {\n                    t.activate();\n                });\n                return this;\n            },\n            deactivate: function deactivate() {\n                ttEach(this, function(t) {\n                    t.deactivate();\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                var open;\n                ttEach(this.first(), function(t) {\n                    open = t.isOpen();\n                });\n                return open;\n            },\n            open: function open() {\n                ttEach(this, function(t) {\n                    t.open();\n                });\n                return this;\n            },\n            close: function close() {\n                ttEach(this, function(t) {\n                    t.close();\n                });\n                return this;\n            },\n            select: function select(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.select($el);\n                });\n                return success;\n            },\n            autocomplete: function autocomplete(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.autocomplete($el);\n                });\n                return success;\n            },\n            moveCursor: function moveCursoe(delta) {\n                var success = false;\n                ttEach(this.first(), function(t) {\n                    success = t.moveCursor(delta);\n                });\n                return success;\n            },\n            val: function val(newVal) {\n                var query;\n                if (!arguments.length) {\n                    ttEach(this.first(), function(t) {\n                        query = t.getVal();\n                    });\n                    return query;\n                } else {\n                    ttEach(this, function(t) {\n                        t.setVal(newVal);\n                    });\n                    return this;\n                }\n            },\n            destroy: function destroy() {\n                ttEach(this, function(typeahead, $input) {\n                    revert($input);\n                    typeahead.destroy();\n                });\n                return this;\n            }\n        };\n        $.fn.typeahead = function(method) {\n            if (methods[method]) {\n                return methods[method].apply(this, [].slice.call(arguments, 1));\n            } else {\n                return methods.initialize.apply(this, arguments);\n            }\n        };\n        $.fn.typeahead.noConflict = function noConflict() {\n            $.fn.typeahead = old;\n            return this;\n        };\n        function ttEach($els, fn) {\n            $els.each(function() {\n                var $input = $(this), typeahead;\n                (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);\n            });\n        }\n        function buildHintFromInput($input, www) {\n            return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop(\"readonly\", true).removeAttr(\"id name placeholder required\").attr({\n                autocomplete: \"off\",\n                spellcheck: \"false\",\n                tabindex: -1\n            });\n        }\n        function prepInput($input, www) {\n            $input.data(keys.attrs, {\n                dir: $input.attr(\"dir\"),\n                autocomplete: $input.attr(\"autocomplete\"),\n                spellcheck: $input.attr(\"spellcheck\"),\n                style: $input.attr(\"style\")\n            });\n            $input.addClass(www.classes.input).attr({\n                autocomplete: \"off\",\n                spellcheck: false\n            });\n            try {\n                !$input.attr(\"dir\") && $input.attr(\"dir\", \"auto\");\n            } catch (e) {}\n            return $input;\n        }\n        function getBackgroundStyles($el) {\n            return {\n                backgroundAttachment: $el.css(\"background-attachment\"),\n                backgroundClip: $el.css(\"background-clip\"),\n                backgroundColor: $el.css(\"background-color\"),\n                backgroundImage: $el.css(\"background-image\"),\n                backgroundOrigin: $el.css(\"background-origin\"),\n                backgroundPosition: $el.css(\"background-position\"),\n                backgroundRepeat: $el.css(\"background-repeat\"),\n                backgroundSize: $el.css(\"background-size\")\n            };\n        }\n        function revert($input) {\n            var www, $wrapper;\n            www = $input.data(keys.www);\n            $wrapper = $input.parent().filter(www.selectors.wrapper);\n            _.each($input.data(keys.attrs), function(val, key) {\n                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);\n            });\n            $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);\n            if ($wrapper.length) {\n                $input.detach().insertAfter($wrapper);\n                $wrapper.remove();\n            }\n        }\n        function $elOrNull(obj) {\n            var isValid, $el;\n            isValid = _.isJQuery(obj) || _.isElement(obj);\n            $el = isValid ? $(obj).first() : [];\n            return $el.length ? $el : null;\n        }\n    })();\n});","/*!\n * typeahead.js 0.11.1\n * https://github.com/twitter/typeahead.js\n * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT\n */\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(\"bloodhound\", [ \"jquery\" ], function(a0) {\n            return root[\"Bloodhound\"] = factory(a0);\n        });\n    } else if (typeof exports === \"object\") {\n        module.exports = factory(require(\"jquery\"));\n    } else {\n        root[\"Bloodhound\"] = factory(jQuery);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            noop: function() {}\n        };\n    }();\n    var VERSION = \"0.11.1\";\n    var tokenizers = function() {\n        \"use strict\";\n        return {\n            nonword: nonword,\n            whitespace: whitespace,\n            obj: {\n                nonword: getObjTokenizer(nonword),\n                whitespace: getObjTokenizer(whitespace)\n            }\n        };\n        function whitespace(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\s+/) : [];\n        }\n        function nonword(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\W+/) : [];\n        }\n        function getObjTokenizer(tokenizer) {\n            return function setKey(keys) {\n                keys = _.isArray(keys) ? keys : [].slice.call(arguments, 0);\n                return function tokenize(o) {\n                    var tokens = [];\n                    _.each(keys, function(k) {\n                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));\n                    });\n                    return tokens;\n                };\n            };\n        }\n    }();\n    var LruCache = function() {\n        \"use strict\";\n        function LruCache(maxSize) {\n            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;\n            this.reset();\n            if (this.maxSize <= 0) {\n                this.set = this.get = $.noop;\n            }\n        }\n        _.mixin(LruCache.prototype, {\n            set: function set(key, val) {\n                var tailItem = this.list.tail, node;\n                if (this.size >= this.maxSize) {\n                    this.list.remove(tailItem);\n                    delete this.hash[tailItem.key];\n                    this.size--;\n                }\n                if (node = this.hash[key]) {\n                    node.val = val;\n                    this.list.moveToFront(node);\n                } else {\n                    node = new Node(key, val);\n                    this.list.add(node);\n                    this.hash[key] = node;\n                    this.size++;\n                }\n            },\n            get: function get(key) {\n                var node = this.hash[key];\n                if (node) {\n                    this.list.moveToFront(node);\n                    return node.val;\n                }\n            },\n            reset: function reset() {\n                this.size = 0;\n                this.hash = {};\n                this.list = new List();\n            }\n        });\n        function List() {\n            this.head = this.tail = null;\n        }\n        _.mixin(List.prototype, {\n            add: function add(node) {\n                if (this.head) {\n                    node.next = this.head;\n                    this.head.prev = node;\n                }\n                this.head = node;\n                this.tail = this.tail || node;\n            },\n            remove: function remove(node) {\n                node.prev ? node.prev.next = node.next : this.head = node.next;\n                node.next ? node.next.prev = node.prev : this.tail = node.prev;\n            },\n            moveToFront: function(node) {\n                this.remove(node);\n                this.add(node);\n            }\n        });\n        function Node(key, val) {\n            this.key = key;\n            this.val = val;\n            this.prev = this.next = null;\n        }\n        return LruCache;\n    }();\n    var PersistentStorage = function() {\n        \"use strict\";\n        var LOCAL_STORAGE;\n        try {\n            LOCAL_STORAGE = window.localStorage;\n            LOCAL_STORAGE.setItem(\"~~~\", \"!\");\n            LOCAL_STORAGE.removeItem(\"~~~\");\n        } catch (err) {\n            LOCAL_STORAGE = null;\n        }\n        function PersistentStorage(namespace, override) {\n            this.prefix = [ \"__\", namespace, \"__\" ].join(\"\");\n            this.ttlKey = \"__ttl__\";\n            this.keyMatcher = new RegExp(\"^\" + _.escapeRegExChars(this.prefix));\n            this.ls = override || LOCAL_STORAGE;\n            !this.ls && this._noop();\n        }\n        _.mixin(PersistentStorage.prototype, {\n            _prefix: function(key) {\n                return this.prefix + key;\n            },\n            _ttlKey: function(key) {\n                return this._prefix(key) + this.ttlKey;\n            },\n            _noop: function() {\n                this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;\n            },\n            _safeSet: function(key, val) {\n                try {\n                    this.ls.setItem(key, val);\n                } catch (err) {\n                    if (err.name === \"QuotaExceededError\") {\n                        this.clear();\n                        this._noop();\n                    }\n                }\n            },\n            get: function(key) {\n                if (this.isExpired(key)) {\n                    this.remove(key);\n                }\n                return decode(this.ls.getItem(this._prefix(key)));\n            },\n            set: function(key, val, ttl) {\n                if (_.isNumber(ttl)) {\n                    this._safeSet(this._ttlKey(key), encode(now() + ttl));\n                } else {\n                    this.ls.removeItem(this._ttlKey(key));\n                }\n                return this._safeSet(this._prefix(key), encode(val));\n            },\n            remove: function(key) {\n                this.ls.removeItem(this._ttlKey(key));\n                this.ls.removeItem(this._prefix(key));\n                return this;\n            },\n            clear: function() {\n                var i, keys = gatherMatchingKeys(this.keyMatcher);\n                for (i = keys.length; i--; ) {\n                    this.remove(keys[i]);\n                }\n                return this;\n            },\n            isExpired: function(key) {\n                var ttl = decode(this.ls.getItem(this._ttlKey(key)));\n                return _.isNumber(ttl) && now() > ttl ? true : false;\n            }\n        });\n        return PersistentStorage;\n        function now() {\n            return new Date().getTime();\n        }\n        function encode(val) {\n            return JSON.stringify(_.isUndefined(val) ? null : val);\n        }\n        function decode(val) {\n            return $.parseJSON(val);\n        }\n        function gatherMatchingKeys(keyMatcher) {\n            var i, key, keys = [], len = LOCAL_STORAGE.length;\n            for (i = 0; i < len; i++) {\n                if ((key = LOCAL_STORAGE.key(i)).match(keyMatcher)) {\n                    keys.push(key.replace(keyMatcher, \"\"));\n                }\n            }\n            return keys;\n        }\n    }();\n    var Transport = function() {\n        \"use strict\";\n        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests = 6, sharedCache = new LruCache(10);\n        function Transport(o) {\n            o = o || {};\n            this.cancelled = false;\n            this.lastReq = null;\n            this._send = o.transport;\n            this._get = o.limiter ? o.limiter(this._get) : this._get;\n            this._cache = o.cache === false ? new LruCache(0) : sharedCache;\n        }\n        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {\n            maxPendingRequests = num;\n        };\n        Transport.resetCache = function resetCache() {\n            sharedCache.reset();\n        };\n        _.mixin(Transport.prototype, {\n            _fingerprint: function fingerprint(o) {\n                o = o || {};\n                return o.url + o.type + $.param(o.data || {});\n            },\n            _get: function(o, cb) {\n                var that = this, fingerprint, jqXhr;\n                fingerprint = this._fingerprint(o);\n                if (this.cancelled || fingerprint !== this.lastReq) {\n                    return;\n                }\n                if (jqXhr = pendingRequests[fingerprint]) {\n                    jqXhr.done(done).fail(fail);\n                } else if (pendingRequestsCount < maxPendingRequests) {\n                    pendingRequestsCount++;\n                    pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);\n                } else {\n                    this.onDeckRequestArgs = [].slice.call(arguments, 0);\n                }\n                function done(resp) {\n                    cb(null, resp);\n                    that._cache.set(fingerprint, resp);\n                }\n                function fail() {\n                    cb(true);\n                }\n                function always() {\n                    pendingRequestsCount--;\n                    delete pendingRequests[fingerprint];\n                    if (that.onDeckRequestArgs) {\n                        that._get.apply(that, that.onDeckRequestArgs);\n                        that.onDeckRequestArgs = null;\n                    }\n                }\n            },\n            get: function(o, cb) {\n                var resp, fingerprint;\n                cb = cb || $.noop;\n                o = _.isString(o) ? {\n                    url: o\n                } : o || {};\n                fingerprint = this._fingerprint(o);\n                this.cancelled = false;\n                this.lastReq = fingerprint;\n                if (resp = this._cache.get(fingerprint)) {\n                    cb(null, resp);\n                } else {\n                    this._get(o, cb);\n                }\n            },\n            cancel: function() {\n                this.cancelled = true;\n            }\n        });\n        return Transport;\n    }();\n    var SearchIndex = window.SearchIndex = function() {\n        \"use strict\";\n        var CHILDREN = \"c\", IDS = \"i\";\n        function SearchIndex(o) {\n            o = o || {};\n            if (!o.datumTokenizer || !o.queryTokenizer) {\n                $.error(\"datumTokenizer and queryTokenizer are both required\");\n            }\n            this.identify = o.identify || _.stringify;\n            this.datumTokenizer = o.datumTokenizer;\n            this.queryTokenizer = o.queryTokenizer;\n            this.reset();\n        }\n        _.mixin(SearchIndex.prototype, {\n            bootstrap: function bootstrap(o) {\n                this.datums = o.datums;\n                this.trie = o.trie;\n            },\n            add: function(data) {\n                var that = this;\n                data = _.isArray(data) ? data : [ data ];\n                _.each(data, function(datum) {\n                    var id, tokens;\n                    that.datums[id = that.identify(datum)] = datum;\n                    tokens = normalizeTokens(that.datumTokenizer(datum));\n                    _.each(tokens, function(token) {\n                        var node, chars, ch;\n                        node = that.trie;\n                        chars = token.split(\"\");\n                        while (ch = chars.shift()) {\n                            node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());\n                            node[IDS].push(id);\n                        }\n                    });\n                });\n            },\n            get: function get(ids) {\n                var that = this;\n                return _.map(ids, function(id) {\n                    return that.datums[id];\n                });\n            },\n            search: function search(query) {\n                var that = this, tokens, matches;\n                tokens = normalizeTokens(this.queryTokenizer(query));\n                _.each(tokens, function(token) {\n                    var node, chars, ch, ids;\n                    if (matches && matches.length === 0) {\n                        return false;\n                    }\n                    node = that.trie;\n                    chars = token.split(\"\");\n                    while (node && (ch = chars.shift())) {\n                        node = node[CHILDREN][ch];\n                    }\n                    if (node && chars.length === 0) {\n                        ids = node[IDS].slice(0);\n                        matches = matches ? getIntersection(matches, ids) : ids;\n                    } else {\n                        matches = [];\n                        return false;\n                    }\n                });\n                return matches ? _.map(unique(matches), function(id) {\n                    return that.datums[id];\n                }) : [];\n            },\n            all: function all() {\n                var values = [];\n                for (var key in this.datums) {\n                    values.push(this.datums[key]);\n                }\n                return values;\n            },\n            reset: function reset() {\n                this.datums = {};\n                this.trie = newNode();\n            },\n            serialize: function serialize() {\n                return {\n                    datums: this.datums,\n                    trie: this.trie\n                };\n            }\n        });\n        return SearchIndex;\n        function normalizeTokens(tokens) {\n            tokens = _.filter(tokens, function(token) {\n                return !!token;\n            });\n            tokens = _.map(tokens, function(token) {\n                return token.toLowerCase();\n            });\n            return tokens;\n        }\n        function newNode() {\n            var node = {};\n            node[IDS] = [];\n            node[CHILDREN] = {};\n            return node;\n        }\n        function unique(array) {\n            var seen = {}, uniques = [];\n            for (var i = 0, len = array.length; i < len; i++) {\n                if (!seen[array[i]]) {\n                    seen[array[i]] = true;\n                    uniques.push(array[i]);\n                }\n            }\n            return uniques;\n        }\n        function getIntersection(arrayA, arrayB) {\n            var ai = 0, bi = 0, intersection = [];\n            arrayA = arrayA.sort();\n            arrayB = arrayB.sort();\n            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;\n            while (ai < lenArrayA && bi < lenArrayB) {\n                if (arrayA[ai] < arrayB[bi]) {\n                    ai++;\n                } else if (arrayA[ai] > arrayB[bi]) {\n                    bi++;\n                } else {\n                    intersection.push(arrayA[ai]);\n                    ai++;\n                    bi++;\n                }\n            }\n            return intersection;\n        }\n    }();\n    var Prefetch = function() {\n        \"use strict\";\n        var keys;\n        keys = {\n            data: \"data\",\n            protocol: \"protocol\",\n            thumbprint: \"thumbprint\"\n        };\n        function Prefetch(o) {\n            this.url = o.url;\n            this.ttl = o.ttl;\n            this.cache = o.cache;\n            this.prepare = o.prepare;\n            this.transform = o.transform;\n            this.transport = o.transport;\n            this.thumbprint = o.thumbprint;\n            this.storage = new PersistentStorage(o.cacheKey);\n        }\n        _.mixin(Prefetch.prototype, {\n            _settings: function settings() {\n                return {\n                    url: this.url,\n                    type: \"GET\",\n                    dataType: \"json\"\n                };\n            },\n            store: function store(data) {\n                if (!this.cache) {\n                    return;\n                }\n                this.storage.set(keys.data, data, this.ttl);\n                this.storage.set(keys.protocol, location.protocol, this.ttl);\n                this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);\n            },\n            fromCache: function fromCache() {\n                var stored = {}, isExpired;\n                if (!this.cache) {\n                    return null;\n                }\n                stored.data = this.storage.get(keys.data);\n                stored.protocol = this.storage.get(keys.protocol);\n                stored.thumbprint = this.storage.get(keys.thumbprint);\n                isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;\n                return stored.data && !isExpired ? stored.data : null;\n            },\n            fromNetwork: function(cb) {\n                var that = this, settings;\n                if (!cb) {\n                    return;\n                }\n                settings = this.prepare(this._settings());\n                this.transport(settings).fail(onError).done(onResponse);\n                function onError() {\n                    cb(true);\n                }\n                function onResponse(resp) {\n                    cb(null, that.transform(resp));\n                }\n            },\n            clear: function clear() {\n                this.storage.clear();\n                return this;\n            }\n        });\n        return Prefetch;\n    }();\n    var Remote = function() {\n        \"use strict\";\n        function Remote(o) {\n            this.url = o.url;\n            this.prepare = o.prepare;\n            this.transform = o.transform;\n            this.transport = new Transport({\n                cache: o.cache,\n                limiter: o.limiter,\n                transport: o.transport\n            });\n        }\n        _.mixin(Remote.prototype, {\n            _settings: function settings() {\n                return {\n                    url: this.url,\n                    type: \"GET\",\n                    dataType: \"json\"\n                };\n            },\n            get: function get(query, cb) {\n                var that = this, settings;\n                if (!cb) {\n                    return;\n                }\n                query = query || \"\";\n                settings = this.prepare(query, this._settings());\n                return this.transport.get(settings, onResponse);\n                function onResponse(err, resp) {\n                    err ? cb([]) : cb(that.transform(resp));\n                }\n            },\n            cancelLastRequest: function cancelLastRequest() {\n                this.transport.cancel();\n            }\n        });\n        return Remote;\n    }();\n    var oParser = function() {\n        \"use strict\";\n        return function parse(o) {\n            var defaults, sorter;\n            defaults = {\n                initialize: true,\n                identify: _.stringify,\n                datumTokenizer: null,\n                queryTokenizer: null,\n                sufficient: 5,\n                sorter: null,\n                local: [],\n                prefetch: null,\n                remote: null\n            };\n            o = _.mixin(defaults, o || {});\n            !o.datumTokenizer && $.error(\"datumTokenizer is required\");\n            !o.queryTokenizer && $.error(\"queryTokenizer is required\");\n            sorter = o.sorter;\n            o.sorter = sorter ? function(x) {\n                return x.sort(sorter);\n            } : _.identity;\n            o.local = _.isFunction(o.local) ? o.local() : o.local;\n            o.prefetch = parsePrefetch(o.prefetch);\n            o.remote = parseRemote(o.remote);\n            return o;\n        };\n        function parsePrefetch(o) {\n            var defaults;\n            if (!o) {\n                return null;\n            }\n            defaults = {\n                url: null,\n                ttl: 24 * 60 * 60 * 1e3,\n                cache: true,\n                cacheKey: null,\n                thumbprint: \"\",\n                prepare: _.identity,\n                transform: _.identity,\n                transport: null\n            };\n            o = _.isString(o) ? {\n                url: o\n            } : o;\n            o = _.mixin(defaults, o);\n            !o.url && $.error(\"prefetch requires url to be set\");\n            o.transform = o.filter || o.transform;\n            o.cacheKey = o.cacheKey || o.url;\n            o.thumbprint = VERSION + o.thumbprint;\n            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            return o;\n        }\n        function parseRemote(o) {\n            var defaults;\n            if (!o) {\n                return;\n            }\n            defaults = {\n                url: null,\n                cache: true,\n                prepare: null,\n                replace: null,\n                wildcard: null,\n                limiter: null,\n                rateLimitBy: \"debounce\",\n                rateLimitWait: 300,\n                transform: _.identity,\n                transport: null\n            };\n            o = _.isString(o) ? {\n                url: o\n            } : o;\n            o = _.mixin(defaults, o);\n            !o.url && $.error(\"remote requires url to be set\");\n            o.transform = o.filter || o.transform;\n            o.prepare = toRemotePrepare(o);\n            o.limiter = toLimiter(o);\n            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            delete o.replace;\n            delete o.wildcard;\n            delete o.rateLimitBy;\n            delete o.rateLimitWait;\n            return o;\n        }\n        function toRemotePrepare(o) {\n            var prepare, replace, wildcard;\n            prepare = o.prepare;\n            replace = o.replace;\n            wildcard = o.wildcard;\n            if (prepare) {\n                return prepare;\n            }\n            if (replace) {\n                prepare = prepareByReplace;\n            } else if (o.wildcard) {\n                prepare = prepareByWildcard;\n            } else {\n                prepare = idenityPrepare;\n            }\n            return prepare;\n            function prepareByReplace(query, settings) {\n                settings.url = replace(settings.url, query);\n                return settings;\n            }\n            function prepareByWildcard(query, settings) {\n                settings.url = settings.url.replace(wildcard, encodeURIComponent(query));\n                return settings;\n            }\n            function idenityPrepare(query, settings) {\n                return settings;\n            }\n        }\n        function toLimiter(o) {\n            var limiter, method, wait;\n            limiter = o.limiter;\n            method = o.rateLimitBy;\n            wait = o.rateLimitWait;\n            if (!limiter) {\n                limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);\n            }\n            return limiter;\n            function debounce(wait) {\n                return function debounce(fn) {\n                    return _.debounce(fn, wait);\n                };\n            }\n            function throttle(wait) {\n                return function throttle(fn) {\n                    return _.throttle(fn, wait);\n                };\n            }\n        }\n        function callbackToDeferred(fn) {\n            return function wrapper(o) {\n                var deferred = $.Deferred();\n                fn(o, onSuccess, onError);\n                return deferred;\n                function onSuccess(resp) {\n                    _.defer(function() {\n                        deferred.resolve(resp);\n                    });\n                }\n                function onError(err) {\n                    _.defer(function() {\n                        deferred.reject(err);\n                    });\n                }\n            };\n        }\n    }();\n    var Bloodhound = function() {\n        \"use strict\";\n        var old;\n        old = window && window.Bloodhound;\n        function Bloodhound(o) {\n            o = oParser(o);\n            this.sorter = o.sorter;\n            this.identify = o.identify;\n            this.sufficient = o.sufficient;\n            this.local = o.local;\n            this.remote = o.remote ? new Remote(o.remote) : null;\n            this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;\n            this.index = new SearchIndex({\n                identify: this.identify,\n                datumTokenizer: o.datumTokenizer,\n                queryTokenizer: o.queryTokenizer\n            });\n            o.initialize !== false && this.initialize();\n        }\n        Bloodhound.noConflict = function noConflict() {\n            window && (window.Bloodhound = old);\n            return Bloodhound;\n        };\n        Bloodhound.tokenizers = tokenizers;\n        _.mixin(Bloodhound.prototype, {\n            __ttAdapter: function ttAdapter() {\n                var that = this;\n                return this.remote ? withAsync : withoutAsync;\n                function withAsync(query, sync, async) {\n                    return that.search(query, sync, async);\n                }\n                function withoutAsync(query, sync) {\n                    return that.search(query, sync);\n                }\n            },\n            _loadPrefetch: function loadPrefetch() {\n                var that = this, deferred, serialized;\n                deferred = $.Deferred();\n                if (!this.prefetch) {\n                    deferred.resolve();\n                } else if (serialized = this.prefetch.fromCache()) {\n                    this.index.bootstrap(serialized);\n                    deferred.resolve();\n                } else {\n                    this.prefetch.fromNetwork(done);\n                }\n                return deferred.promise();\n                function done(err, data) {\n                    if (err) {\n                        return deferred.reject();\n                    }\n                    that.add(data);\n                    that.prefetch.store(that.index.serialize());\n                    deferred.resolve();\n                }\n            },\n            _initialize: function initialize() {\n                var that = this, deferred;\n                this.clear();\n                (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);\n                return this.initPromise;\n                function addLocalToIndex() {\n                    that.add(that.local);\n                }\n            },\n            initialize: function initialize(force) {\n                return !this.initPromise || force ? this._initialize() : this.initPromise;\n            },\n            add: function add(data) {\n                this.index.add(data);\n                return this;\n            },\n            get: function get(ids) {\n                ids = _.isArray(ids) ? ids : [].slice.call(arguments);\n                return this.index.get(ids);\n            },\n            search: function search(query, sync, async) {\n                var that = this, local;\n                local = this.sorter(this.index.search(query));\n                sync(this.remote ? local.slice() : local);\n                if (this.remote && local.length < this.sufficient) {\n                    this.remote.get(query, processRemote);\n                } else if (this.remote) {\n                    this.remote.cancelLastRequest();\n                }\n                return this;\n                function processRemote(remote) {\n                    var nonDuplicates = [];\n                    _.each(remote, function(r) {\n                        !_.some(local, function(l) {\n                            return that.identify(r) === that.identify(l);\n                        }) && nonDuplicates.push(r);\n                    });\n                    async && async(nonDuplicates);\n                }\n            },\n            all: function all() {\n                return this.index.all();\n            },\n            clear: function clear() {\n                this.index.reset();\n                return this;\n            },\n            clearPrefetchCache: function clearPrefetchCache() {\n                this.prefetch && this.prefetch.clear();\n                return this;\n            },\n            clearRemoteCache: function clearRemoteCache() {\n                Transport.resetCache();\n                return this;\n            },\n            ttAdapter: function ttAdapter() {\n                return this.__ttAdapter();\n            }\n        });\n        return Bloodhound;\n    }();\n    return Bloodhound;\n});","import $ from 'jquery';\nimport _ from 'lodash';\nimport '../node_modules/typeahead.js/dist/typeahead.jquery.js'; // this is side-effects only, but gives us our dependencies in closure scope\nimport Bloodhound from '../node_modules/typeahead.js/dist/bloodhound.js';\n\n/**\n * function for determining if the quick key should fire\n */\nconst inputFocused = function () {\n\treturn /INPUT|SELECT|TEXTAREA/.test(document.activeElement.tagName) || document.activeElement.contentEditable === 'true';\n}\n\nconst decodeEntities = function (str) {\n\tconst textarea = document.createElement('textarea');\n\ttextarea.innerHTML = str;\n\treturn textarea.value;\n}\n\n/**\n * Object to store icons data by key\n */\nlet iconStore = {\n\tstore: {\n\t\tattachment: {\n\t\t\ttype: 'dashicon',\n\t\t\ticon: 'dashicons-admin-media',\n\t\t},\n\t\tcategory: {\n\t\t\ttype: 'dashicon',\n\t\t\ticon: 'dashicons-category',\n\t\t},\n\t\tnav_menu: {\n\t\t\ttype: 'dashicon',\n\t\t\ticon: 'dashicons-menu',\n\t\t},\n\t\tnav_menu_item: {\n\t\t\ttype: 'dashicon',\n\t\t\ticon: 'dashicons-admin-appearance',\n\t\t},\n\t\tpage: {\n\t\t\ttype: 'dashicon',\n\t\t\ticon: 'dashicons-admin-page',\n\t\t},\n\t\tpost: {\n\t\t\ttype: 'dashicon',\n\t\t\ticon: 'dashicons-admin-post',\n\t\t},\n\t\tpost_tag: {\n\t\t\ttype: 'dashicon',\n\t\t\ticon: 'dashicons-tag',\n\t\t},\n\t\tpost_format: {\n\t\t\ttype: 'dashicon',\n\t\t\ticon: 'dashicons-format-standard',\n\t\t},\n\t\tterm: {\n\t\t\ttype: 'dashicon',\n\t\t\ticon: 'dashicons-category',\n\t\t},\n\t\tuser: {\n\t\t\ttype: 'dashicon',\n\t\t\ticon: 'dashicons-admin-users',\n\t\t},\n\t},\n\n\tadd: function (key, type, icon) {\n\t\tif (!this.store[key]) {\n\t\t\tthis.store[key] = {\n\t\t\t\ttype: type,\n\t\t\t\ticon: icon,\n\t\t\t};\n\t\t}\n\n\t\treturn this.store[key];\n\t},\n\n\tremove: function (key) {\n\t\tif (this.store[key]) {\n\t\t\tdelete this.store[key];\n\t\t}\n\t},\n\n\tget: function (key) {\n\t\treturn (typeof this.store[key] === 'object') ? this.store[key] : false;\n\t},\n};\n\nclass Suggestion {\n\n\t/**\n\t * Base Suggestion class constrcutor that contains the suggestion model\n\t *\n\t * @param object data\n\t * @param string type\n\t */\n\tconstructor(data = {}, type = '') {\n\t\tthis.attributes = [];\n\t\tthis.classes = [];\n\t\tthis.href = '';\n\t\tthis.icon = null;\n\t\tthis.iconClasses = ['jarvis__icon'];\n\t\tthis.iconKey = '';\n\t\tthis.iconStyle = '';\n\t\tthis.iconType = 'dashicon';\n\t\tthis.kind = '';\n\t\tthis.prefix = '';\n\t\tthis.section = '';\n\t\tthis.title = '';\n\t\tthis.type = '';\n\n\t\tfor (let prop in data) {\n\t\t\tif (data.hasOwnProperty(prop)) {\n\t\t\t\tthis[prop] = data[prop];\n\t\t\t}\n\t\t}\n\n\t\tif (typeof this.type === 'string' && this.type.length > 0 && this.attributes.indexOf(this.type) === -1) {\n\t\t\tthis.attributes.push(this.type);\n\t\t}\n\n\t\tif (this.iconKey && this.iconType && this.icon && !iconStore.get(this.iconKey)) {\n\t\t\ticonStore.add(this.iconKey, this.iconType, this.icon);\n\t\t}\n\n\t\tthis.setIcon(this.iconKey);\n\t}\n\n\t/**\n\t * Set the icon of this suggestion to the icon key in the icon store\n\t *\n\t * @param string iconKey\n\t */\n\tsetIcon(iconKey = '') {\n\t\t// image icon - usually unique per suggestion - no reason to cache it\n\t\tif (this.iconType === 'image' && this.icon) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!iconStore.get(iconKey) && this.kind) {\n\t\t\tswitch (this.kind) {\n\t\t\t\tcase 'term':\n\t\t\t\t\ticonKey = 'post_tag';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'post':\n\t\t\t\t\ticonKey = 'post';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'user':\n\t\t\t\t\ticonKey = 'user';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tlet storedIcon = iconStore.get(iconKey);\n\n\t\tif (storedIcon) {\n\t\t\tthis.iconKey = iconKey;\n\t\t\tthis.iconType = storedIcon.type;\n\t\t\tthis.icon = storedIcon.icon;\n\n\t\t\tif (this.iconType === 'dashicon') {\n\t\t\t\tthis.iconClasses.push('dashicons-before');\n\n\t\t\t\tif (this.iconClasses.indexOf(this.icon) === -1) {\n\t\t\t\t\tthis.iconClasses.push(this.icon);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.icon;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\nclass MenuSuggestion extends Suggestion {\n\t/**\n\t * Heavily modify the base suggestion model for menu items\n\t */\n\tconstructor(link) {\n\t\tsuper();\n\n\t\tthis.link = link;\n\t\tthis.section = jQuery(this.link).closest('li.menu-top').first();\n\t\tthis.prefix = this.section.find('.wp-menu-name').clone().children().remove().end().text();\n\t\tthis.kind = 'menu';\n\t\tthis.type = this.kind;\n\t\tthis.href = link.href;\n\n\t\tthis.attributes.push(this.type);\n\t\tthis.classes.push(`jarvis__suggestion--${this.kind}`);\n\n\t\tif (jQuery(this.link).is('.wp-submenu a')) {\n\t\t\tthis.title = `${this.prefix} » ${jQuery(this.link).clone().children().remove().end().text()}`;\n\t\t} else {\n\t\t\tthis.title = this.prefix;\n\t\t}\n\n\t\tlet $wpMenuIcon = this.section.find('.wp-menu-image').first();\n\n\t\t// try and get the icon key from the top level link post_type= param of the link href so it matches up to remote data\n\t\tlet $wpMenuLink = this.section.find('> a').first();\n\t\tif ($wpMenuLink.length > 0) {\n\t\t\tlet linkHref = $wpMenuLink.attr('href');\n\t\t\tlet qsIndex = linkHref.indexOf('?');\n\n\t\t\tif (qsIndex > -1) {\n\t\t\t\tlet qs = linkHref.substr(linkHref.indexOf('?') + 1);\n\t\t\t\tlet params = qs.split(\"&\");\n\n\t\t\t\tfor (let i = 0; i < params.length; i++) {\n\t\t\t\t\tlet pairs = params[i].split('=');\n\t\t\t\t\tif (pairs.length === 2 && pairs[0] === 'post_type' && pairs[1].length > 0) {\n\t\t\t\t\t\tthis.iconKey = pairs[1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.iconKey) {\n\t\t\tthis.iconKey = this.section.attr('id');\n\t\t}\n\n\t\tthis.classes.push(`jarvis__suggestion--${this.iconKey}`);\n\n\t\tif ($wpMenuIcon.length > 0) {\n\t\t\tif (!iconStore.get(this.iconKey)) {\n\t\t\t\tlet computedStyle;\n\n\t\t\t\tswitch (true) {\n\t\t\t\t\tcase this.section.find('.wp-menu-image img').length > 0:\n\t\t\t\t\t\t// img tag inside icon - old school\n\t\t\t\t\t\tthis.iconType = 'image';\n\t\t\t\t\t\tthis.icon = this.section.find('.wp-menu-image img').first().attr('src');\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase $wpMenuIcon.hasClass('svg'):\n\t\t\t\t\t\t// base64 encoded svg\n\t\t\t\t\t\tcomputedStyle = window.getComputedStyle($wpMenuIcon.get(0));\n\t\t\t\t\t\tif (/^url\\(\"data:image\\/svg\\+xml\\;base64,/.test(computedStyle.backgroundImage)) {\n\t\t\t\t\t\t\tthis.iconType = 'svg';\n\t\t\t\t\t\t\tthis.icon = atob(computedStyle.backgroundImage.replace(/^url\\(\"data:image\\/svg\\+xml\\;base64,/, '').replace(/\\\"\\)$/, ''));\n\t\t\t\t\t\t\tthis.icon = this.icon.replace(/<\\?xml [^>]+\\?>/g, '').replace(/\\sid=\"[^\\\"]+\"/g, '').replace(/<!--[\\s\\S]*?-->/g, '').replace(/<(title|desc|defs)>[^<]+?<\\/(title|desc|defs)>/g, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase $wpMenuIcon.hasClass('dashicons-before'):\n\n\t\t\t\t\t\tcomputedStyle = window.getComputedStyle($wpMenuIcon.get(0), ':before');\n\n\t\t\t\t\t\tif (computedStyle.fontFamily === 'dashicons') {\n\t\t\t\t\t\t\t// proper dashicon\n\t\t\t\t\t\t\tthis.iconType = 'dashicon';\n\t\t\t\t\t\t\tthis.icon = $wpMenuIcon.attr('class').trim().split(' ').filter(c => ['dashicons-before', 'wp-menu-image'].indexOf(c) === -1).shift();\n\t\t\t\t\t\t\tthis.iconClasses.push(this.icon);\n\t\t\t\t\t\t\tthis.iconClasses.push('dashicons-before');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// custom icons on top of a dashicon using css (woocommerce does this)\n\t\t\t\t\t\t\tlet style = document.getElementById('jarvis_style');\n\t\t\t\t\t\t\tif (!style) {\n\t\t\t\t\t\t\t\tstyle = document.createElement('style');\n\t\t\t\t\t\t\t\tstyle.type = 'text/css';\n\t\t\t\t\t\t\t\tstyle.id = 'jarvis_style';\n\t\t\t\t\t\t\t\tdocument.head.appendChild(style);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet css = `.jarvis__suggestion--${this.iconKey} .jarvis__icon::before { font-family: ${computedStyle.fontFamily}; content: ${computedStyle.content}; }` + \"\\n\";\n\n\t\t\t\t\t\t\tstyle.appendChild(document.createTextNode(css));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\ticonStore.add(this.iconKey, this.iconType, this.icon);\n\t\t\t}\n\n\t\t\tthis.setIcon(this.iconKey);\n\t\t}\n\t}\n}\n\n/**\n * underscore template for typeahead suggestion\n */\nconst templates = {\n\tsuggestion: _.template(`\n\t\t<span class=\"<% print( classes.join( ' ' ) ) %>\">\n\t\t\t<a href=\"<%= href %>\" data-type=\"<%= type %>\">\n\t\t\t\t<span class=\"<% print( iconClasses.join( ' ' ) ) %>\" style='<%= iconStyle %>' title=\"<%= prefix %>\">\n\t\t\t\t<% if ( iconType === 'image' ) { %>\n\t\t\t\t\t<img src=\"<%= icon %>\" alt=\"<%= title %>\">\n\t\t\t\t<% } else if ( iconType === 'svg' ) { %>\n\t\t\t\t\t<%= icon %>\n\t\t\t\t<% } %>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"jarvis__title\" title=\"<%= title %>\"><%= title %></span>\n\t\t\t\t<% if ( attributes ) { %>\n\t\t\t\t\t<span class=\"jarvis__pills\">\n\t\t\t\t\t\t<% _.each( attributes, function(attr) { %>\n\t\t\t\t\t\t\t<span class=\"jarvis__pill\"><%= attr %></span>\n\t\t\t\t\t\t<% } ); %>\n\t\t\t\t\t</span>\n\t\t\t\t<% } %>\n\t\t\t</a>\n\t\t</span>\n\t`)\n};\n\nexport default class Jarvis {\n\t/**\n\t * The main interface to Jarvis\n\t *\n\t * @param object settings\n\t * @param array instants\n\t */\n\tconstructor(settings = {}, instants = []) {\n\t\tthis.iconStore = iconStore;\n\n\t\t// default settings\n\t\tthis.settings = {\n\t\t\thotkey: '/',\n\t\t\tsearchurl: '/wp-json/jarvis/v1/search',\n\t\t};\n\n\t\t// merge constructor settings with defaults\n\t\tfor (const s in settings) {\n\t\t\tif (settings.hasOwnProperty(s)) {\n\t\t\t\tthis.settings[s] = settings[s];\n\t\t\t}\n\t\t}\n\n\t\t// internal flag for modal open/close\n\t\tthis.opened = false;\n\n\t\t// array for storing wordpress links as datums for autocomplete\n\t\tthis.suggestions = [];\n\n\t\t// hold the instant suggestions to get processed after the menu links\n\t\tthis.instants = instants;\n\n\t\t// the current search term to re-open the modal with the same term\n\t\tthis.term = '';\n\n\t\t// flag for whether the ctrlKey is currently pressed\n\t\tthis.ctrlKey = false;\n\n\t\t// outer jarvis node\n\t\tthis.node = document.createElement('div');\n\t\tthis.node.className = `jarvis jarvis--${this.settings.theme}`;\n\t\tthis.node.id = 'jarvis';\n\n\t\t// modal node\n\t\tthis.modal = document.createElement('div');\n\t\tthis.modal.className = 'jarvis__modal';\n\n\t\t// modal overlay node\n\t\tthis.overlay = document.createElement('div');\n\t\tthis.overlay.className = 'jarvis__overlay';\n\t\tthis.overlay.addEventListener('click', () => this.close());\n\n\t\t// search input node\n\t\tthis.search = document.createElement('input');\n\t\tthis.search.type = 'text';\n\t\tthis.$search = $(this.search); // jquery version for typeahead\n\n\t\t// add our internal nodes to the outer node\n\t\tthis.node.appendChild(this.overlay);\n\t\tthis.node.appendChild(this.modal);\n\t\tthis.modal.appendChild(this.search);\n\n\t\t// loading icon node\n\t\tthis.loading = document.createElement('i');\n\t\tthis.loading.className = 'jarvis__loading';\n\n\t\t// does the url argument match the searchurl\n\t\tthis.isJarvisUrl = function (url) {\n\t\t\tconst matches = (new URL(url, location.origin)).pathname.match(/^\\/wp-json\\/jarvis\\//);\n\t\t\treturn matches && matches.length > 0;\n\t\t}\n\n\t\t// test if constructor was called after the page is loaded, or on DOMContentLoaded\n\t\tif (/complete|loaded/.test(document.readyState)) {\n\t\t\tthis.init();\n\t\t} else {\n\t\t\tdocument.addEventListener('DOMContentLoaded', this.init.bind(this));\n\t\t}\n\t}\n\n\tinit() {\n\t\t// scrape wordpress menu for sidebar links\n\t\t$('#adminmenu a').each((i, elem) => {\n\t\t\tthis.suggestions.push(new MenuSuggestion(elem));\n\t\t\treturn;\n\t\t});\n\n\t\t// process the instant suggestions after the icons have been scraped\n\t\tif (Array.isArray(this.instants)) {\n\t\t\tthis.suggestions = this.suggestions.concat(this.instants.map(inst => new Suggestion(inst)));\n\t\t}\n\n\t\t// Prevent Firefox from using quick search with the hotkey\n\t\tdocument.addEventListener('keydown', (e) => {\n\t\t\tif (e.key === this.settings.hotkey && !inputFocused()) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t}, true); // use true for event capture\n\n\t\t// menu bar icon click\n\t\t$(document).on('click', '#wp-admin-bar-jarvis_menubar_icon a', (e) => {\n\t\t\te.preventDefault();\n\t\t\tthis.open();\n\t\t});\n\n\t\t// let the typeahead:selected event handle ctrl+click so it's consistent with keyboard ctrl+enter\n\t\t// prevent default for ajax actions\n\t\t$(document).on('click', '.jarvis__suggestion a', (e) => {\n\t\t\tif (e.ctrlKey === true || e.currentTarget.getAttribute('data-type') === 'ajax') {\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\n\t\t// record the ctrlKey status so we can use it in typeaheads custom triggered events\n\t\t$(document).on('keydown keyup', '#jarvis-search', (e) => {\n\t\t\tthis.ctrlKey = e.ctrlKey;\n\t\t});\n\n\t\t// listen for hotkey\n\t\t$(document).on('keyup', (e) => {\n\t\t\t// handle esc key - must go before inputFocused check so we can close when jarvis search is focused\n\t\t\tif (this.opened && e.key === 'Escape') {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.close();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// return if editable field is focused\n\t\t\tif (inputFocused()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// open jarvis\n\t\t\tif (!this.opened && e.key === this.settings.hotkey) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn this.open();\n\t\t\t}\n\t\t});\n\n\t\t// showing spinners & adding nonce headers\n\t\t$(document).ajaxSend((event, jqXHR, settings) => {\n\t\t\tif (this.opened && this.isJarvisUrl(settings.url)) {\n\t\t\t\t// add our loading icon to the UI\n\t\t\t\tthis.modal.appendChild(this.loading);\n\t\t\t\t// add our nonce to the header so the rest api considers it a logged in request\n\t\t\t\tjqXHR.setRequestHeader('X-WP-Nonce', this.settings.nonce);\n\t\t\t}\n\t\t});\n\n\t\t// hiding spinners\n\t\t$(document).ajaxComplete((event, jqXHR, settings) => {\n\t\t\tif (this.opened && this.isJarvisUrl(settings.url) && this.loading.parentNode) {\n\t\t\t\t// hide our loading icon on ajaxComplete\n\t\t\t\tthis.loading.parentNode.removeChild(this.loading);\n\t\t\t}\n\t\t});\n\t}\n\n\topen() {\n\t\tthis.opened = true;\n\t\tdocument.body.appendChild(this.node); // append our primary node to the body\n\n\t\tthis.$search.typeahead({\n\t\t\thint: true,\n\t\t\thighlight: true,\n\t\t\tminLength: 1,\n\t\t\tclassNames: {\n\t\t\t\tcursor: 'jarvis__cursor',\n\t\t\t\tdataset: 'jarvis__dataset',\n\t\t\t\tempty: 'jarvis__empty',\n\t\t\t\thighlight: 'jarvis__highlight',\n\t\t\t\thint: 'jarvis__hint',\n\t\t\t\tinput: 'jarvis__input',\n\t\t\t\tmenu: 'jarvis__menu',\n\t\t\t\topen: 'jarvis__open',\n\t\t\t\tselectable: 'jarvis__selectable',\n\t\t\t\tsuggestion: 'jarvis__suggestion',\n\t\t\t\twrapper: 'jarvis__wrap',\n\t\t\t}\n\t\t}, {\n\t\t\tname: 'results',\n\t\t\tlimit: 10,\n\t\t\tdisplay: (str) => decodeEntities(str.title),\n\t\t\tsource: new Bloodhound({\n\t\t\t\tlocal: this.suggestions,\n\t\t\t\tdatumTokenizer: Bloodhound.tokenizers.obj.whitespace('title'),\n\t\t\t\tqueryTokenizer: Bloodhound.tokenizers.whitespace,\n\t\t\t\tremote: {\n\t\t\t\t\turl: `${this.settings.searchurl}?q=%s`,\n\t\t\t\t\twildcard: '%s',\n\t\t\t\t\ttransform: (response) => {\n\t\t\t\t\t\tif (Array.isArray(response)) {\n\t\t\t\t\t\t\treturn response.map((data) => new Suggestion(data, 'remote'));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn response;\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}),\n\t\t\ttemplates: {\n\t\t\t\tsuggestion: (data) => templates.suggestion(data),\n\t\t\t}\n\t\t});\n\n\t\tthis.$search.on('typeahead:select', (e, item) => {\n\t\t\tif (item.type === 'ajax') {\n\t\t\t\treturn this.ajax(item);\n\t\t\t}\n\n\t\t\tif (this.ctrlKey) {\n\t\t\t\twindow.open(item.href, '_blank');\n\t\t\t} else {\n\t\t\t\tlocation.href = item.href;\n\t\t\t}\n\t\t});\n\n\t\tthis.$search.on('keyup', () => {\n\t\t\tthis.term = this.search.value;\n\t\t});\n\n\t\tthis.$search.typeahead('val', this.term);\n\t\tthis.$search.focus().select();\n\n\t\treturn this;\n\t}\n\n\tclose() {\n\t\tthis.opened = false;\n\t\tthis.node.parentNode.removeChild(this.node);\n\t\tthis.$search.typeahead('destroy');\n\n\t\treturn this;\n\t}\n\n\ttoggle() {\n\t\treturn (this.opened) ? this.close() : this.open();\n\t}\n\n\tajax(item) {\n\t\tthis.modal.appendChild(this.loading);\n\n\t\t$.ajax({\n\t\t\turl: item.href,\n\t\t\tsuccess: (data, status, jqXHR) => {\n\t\t\t\tthis.term = '';\n\t\t\t\tif (this.loading.parentNode) {\n\t\t\t\t\tthis.modal.removeChild(this.loading);\n\t\t\t\t}\n\n\t\t\t\tthis.close();\n\t\t\t},\n\t\t\terror: (jqXHR, status, error) => {\n\t\t\t\tif (this.loading.parentNode) {\n\t\t\t\t\tthis.modal.removeChild(this.loading);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n"],"names":["$","_","isMsie","test","navigator","userAgent","match","isBlankString","str","escapeRegExChars","replace","isString","obj","isNumber","isArray","isFunction","isObject","isPlainObject","isUndefined","isElement","nodeType","isJQuery","toStr","s","bind","proxy","each","collection","cb","reverseArgs","index","value","map","filter","grep","every","result","key","val","call","some","mixin","extend","identity","x","clone","getIdGenerator","counter","templatify","template","String","defer","fn","setTimeout","debounce","func","wait","immediate","timeout","later","callNow","context","this","args","arguments","apply","clearTimeout","throttle","previous","Date","now","remaining","stringify","JSON","noop","WWW","defaultClassNames","wrapper","input","hint","menu","dataset","suggestion","selectable","empty","open","cursor","highlight","build","o","www","classes","css","buildCss","html","buildHtml","selectors","buildSelectors","c","v","k","position","display","top","left","borderColor","boxShadow","opacity","verticalAlign","backgroundColor","inputWithNoHint","zIndex","ltr","right","rtl","backgroundImage","EventBus","namespace","deprecationMap","el","error","$el","render","cursorchange","select","autocomplete","prototype","_trigger","type","$e","Event","unshift","trigger","before","slice","isDefaultPrevented","deprecatedType","EventEmitter","splitter","nextTick","getNextTick","onSync","onAsync","off","on","method","types","split","bindContext","_callbacks","shift","sync","async","push","callbacks","syncFlush","asyncFlush","getFlush","concat","flush","cancelled","i","len","length","window","setImmediate","doc","defaults","node","pattern","tagName","className","wordsOnly","caseSensitive","regex","hightlightTextNode","textNode","patternNode","wrapperNode","exec","data","createElement","splitText","appendChild","cloneNode","parentNode","replaceChild","traverse","childNode","TEXT_NODE_TYPE","childNodes","getRegex","patterns","regexStr","escapedPatterns","join","RegExp","document","Input","specialKeyCodeMap","$hint","$input","query","queryWhenFocused","hasFocus","$overflowHelper","buildOverflowHelper","_checkLanguageDirection","setHint","getHint","clearHint","clearHintIfInvalid","normalizeQuery","_onBlur","resetInputValue","_onFocus","_onKeydown","keyName","which","keyCode","_managePreventDefault","_shouldTrigger","_onInput","_setQuery","getInputValue","preventDefault","withModifier","dir","toLowerCase","attr","silent","areEquivalent","hasDifferentWhitespace","areQueriesEquivalent","onBlur","onFocus","onKeydown","onInput","that","focus","blur","getLangDir","getQuery","setQuery","setInputValue","hasQueryChangedSinceLastFocus","valIsPrefixOfHint","indexOf","hasOverflow","is","constraint","width","text","isCursorAtEnd","valueLength","selectionStart","range","selection","createRange","moveStart","destroy","remove","visibility","whiteSpace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","wordSpacing","letterSpacing","textIndent","textRendering","textTransform","insertAfter","a","b","altKey","ctrlKey","metaKey","shiftKey","Dataset","keys","nameGenerator","templates","notFound","source","name","isValidName","limit","displayFn","getDisplayFn","displayKey","getTemplates","__ttAdapter","_resetLastSuggestion","addClass","extractData","_overwrite","suggestions","_renderSuggestions","pending","_renderPending","_renderNotFound","_empty","_append","$lastSuggestion","_appendSuggestions","$fragment","_getSuggestionsFragment","children","last","prepend","_getHeader","append","_getFooter","after","fragment","createDocumentFragment","_injectQuery","footer","header","_query","update","canceled","syncCalled","rendered","cancel","clear","isEmpty","suggestionTemplate","Menu","initializeDataset","oDataset","$node","find","first","appendTo","datasets","_onSelectableClick","currentTarget","_onRendered","toggleClass","_allDatasetsEmpty","_onCleared","_propagate","isDatasetEmpty","_getSelectables","_removeCursor","$selectable","getActiveSelectable","removeClass","_ensureVisible","elTop","elBottom","nodeScrollTop","nodeHeight","outerHeight","scrollTop","height","parseInt","onSelectableClick","isOpen","hasClass","close","setLanguageDirection","selectableRelativeToCursor","delta","$selectables","$oldCursor","newIndex","eq","setCursor","getSelectableData","getTopSelectable","isValidUpdate","updateDataset","clearDataset","destroyDataset","DefaultMenu","_show","_hide","hide","Typeahead","onFocused","onBlurred","onEnterKeyed","onTabKeyed","onEscKeyed","onUpKeyed","onDownKeyed","onLeftKeyed","onRightKeyed","onQueryChanged","onWhitespaceChanged","eventBus","minLength","enabled","active","activate","_hacks","_onSelectableClicked","_onAsyncRequested","_onAsyncCanceled","_onAsyncReceived","_onDatasetRendered","_onDatasetCleared","_onLangDirChanged","$menu","isActive","hasActive","activeElement","has","stopImmediatePropagation","_updateHint","_onFocused","_minLengthMet","_onBlurred","_onEnterKeyed","_onTabKeyed","_onEscKeyed","_onUpKeyed","moveCursor","_onDownKeyed","_onLeftKeyed","_onRightKeyed","_onQueryChanged","e","_onWhitespaceChanged","_openIfActive","escapedQuery","isEnabled","enable","disable","deactivate","setVal","getVal","$candidate","payload","ctx","methods","old","ttEach","$els","typeahead","buildHintFromInput","removeData","getBackgroundStyles","prop","removeAttr","spellcheck","tabindex","prepInput","attrs","style","backgroundAttachment","backgroundClip","backgroundOrigin","backgroundPosition","backgroundRepeat","backgroundSize","revert","$wrapper","parent","detach","$elOrNull","initialize","classNames","attach","defaultHint","defaultMenu","MenuConstructor","d","wrap","t","success","newVal","noConflict","factory","require$$0","module","exports","VERSION","tokenizers","nonword","whitespace","getObjTokenizer","tokenizer","tokens","LruCache","maxSize","reset","set","get","List","head","tail","Node","prev","next","tailItem","list","size","hash","moveToFront","add","PersistentStorage","LOCAL_STORAGE","localStorage","setItem","removeItem","err","override","prefix","ttlKey","keyMatcher","ls","_noop","_prefix","_ttlKey","isExpired","_safeSet","decode","getItem","ttl","encode","gatherMatchingKeys","getTime","parseJSON","Transport","pendingRequestsCount","pendingRequests","maxPendingRequests","sharedCache","lastReq","_send","transport","_get","limiter","_cache","cache","setMaxPendingRequests","num","resetCache","_fingerprint","url","param","fingerprint","jqXhr","done","resp","fail","always","onDeckRequestArgs","SearchIndex","CHILDREN","IDS","datumTokenizer","queryTokenizer","identify","bootstrap","datums","trie","datum","id","normalizeTokens","token","chars","ch","newNode","ids","search","matches","getIntersection","unique","all","values","serialize","array","seen","uniques","arrayA","arrayB","ai","bi","intersection","sort","lenArrayA","lenArrayB","Prefetch","prepare","transform","thumbprint","storage","cacheKey","protocol","_settings","dataType","store","location","fromCache","stored","fromNetwork","settings","onError","onResponse","Remote","cancelLastRequest","oParser","sorter","sufficient","local","prefetch","remote","parsePrefetch","parseRemote","callbackToDeferred","ajax","wildcard","rateLimitBy","rateLimitWait","toRemotePrepare","toLimiter","prepareByReplace","prepareByWildcard","idenityPrepare","encodeURIComponent","deferred","Deferred","onSuccess","resolve","reject","Bloodhound","withAsync","withoutAsync","_loadPrefetch","serialized","promise","_initialize","initPromise","addLocalToIndex","force","processRemote","nonDuplicates","r","l","clearPrefetchCache","clearRemoteCache","ttAdapter","inputFocused","contentEditable","iconStore","attachment","icon","category","nav_menu","nav_menu_item","page","post","post_tag","post_format","term","user","Suggestion","constructor","attributes","href","iconClasses","iconKey","iconStyle","iconType","kind","section","title","hasOwnProperty","setIcon","storedIcon","MenuSuggestion","link","super","jQuery","closest","end","$wpMenuIcon","$wpMenuLink","linkHref","params","substr","pairs","computedStyle","getComputedStyle","atob","trim","getElementById","content","createTextNode","instants","hotkey","searchurl","opened","theme","modal","overlay","addEventListener","$search","loading","isJarvisUrl","URL","origin","pathname","readyState","init","elem","Array","inst","stopPropagation","getAttribute","ajaxSend","event","jqXHR","setRequestHeader","nonce","ajaxComplete","removeChild","body","textarea","innerHTML","decodeEntities","response","item","toggle","status"],"mappings":"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"}